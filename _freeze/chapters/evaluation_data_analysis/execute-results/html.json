{
  "hash": "e25fe20bb454b4df778f7cf71d6c829f",
  "result": {
    "markdown": "# Evaluation data: description, exploration, checks\n\n## Data input, cleaning, feature construction and imputation  \n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"load packages\"}\nlibrary(tidyverse) \n\n# markdown et al. ----\nlibrary(knitr)\nlibrary(bookdown)\nlibrary(rmarkdown)\nlibrary(shiny)\nlibrary(quarto)\nlibrary(formattable) # Create 'Formattable' Data Structures\nlibrary(DT) # R interface to DataTables library (JavaScript)\n\n# dataviz ----\nlibrary(ggrepel)\nlibrary(plotly) # Create Interactive Web Graphics via 'plotly.js'\n\n# others ----\nlibrary(here) # A Simpler Way to Find Your Files\n# renv::install(packages = \"metamelb-repliCATS/aggreCAT\")\n#library(aggreCAT)\n\n# Make sure select is always the dplyr version\nselect <- dplyr::select \n\n# options\noptions(knitr.duplicate.label = \"allow\")\noptions(mc.cores = parallel::detectCores())\n```\n:::\n\n\n\n::: {.callout-note collapse=\"true\"}\n## Note on data input (10-Aug-23)\n\nBelow, the evaluation data is input from an Airtable, which itself was largely hand-input from evaluators' reports. As PubPub builds (target: end of Sept. 2023), this will allow us to  include the ratings and predictions as structured data objects. We then plan to access and input this data *directly* from the PubPub (API?) into the present analysis. This will improve automation and limit the potential for data entry errors.\n\n::: \n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Input evaluation data\"}\nevals_pub <- readRDS(file = here(\"data\", \"evals.Rdata\"))\nall_papers_p <- readRDS(file = here(\"data\", \"all_papers_p.Rdata\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Define lists of columns to use later\"}\n# Lists of categories\nrating_cats <- c(\"overall\", \"adv_knowledge\", \"methods\", \"logic_comms\", \"real_world\", \"gp_relevance\", \"open_sci\")\n\n#... 'predictions' are currently 1-5 (0-5?)\npred_cats <- c(\"journal_predict\", \"merits_journal\")\n```\n:::\n\n\n\n    \n## Basic presentation\n\n### What sorts of papers/projects are we considering and evaluating? {-}\n\nIn this section, we give some simple data summaries and visualizations, for a broad description of The Unjournal's coverage. \n\nIn the interactive table below we give some key attributes of the papers and the evaluators.\n\n\n::: column-body-outset    \n\n\n::: {.cell}\n\n```{.r .cell-code}\nevals_pub_df_overview <- evals_pub %>%\n  arrange(paper_abbrev, eval_name) %>%\n  dplyr::select(paper_abbrev, crucial_rsx, eval_name, cat_1, cat_2, source_main, author_agreement) %>%\n  dplyr::select(-matches(\"ub_|lb_|conf\")) \n\nevals_pub_df_overview %>%   \n   rename(\n    \"Paper Abbreviation\" = paper_abbrev,\n    \"Paper name\" = crucial_rsx,\n    \"Evaluator Name\" = eval_name,\n    \"Main category\" = cat_1,\n    \"Category 2\" = cat_2,\n    \"Main source\" = source_main,\n    \"Author contact\" = author_agreement,\n  ) %>% \n  DT::datatable(\n    caption = \"Evaluations (confidence bounds not shown)\", \n    filter = 'top',\n    rownames= FALSE,\n    options = list(pageLength = 5,\n      columnDefs = list(list(width = '150px', targets = 1)))) %>% \n  formatStyle(columns = 2:ncol(evals_pub_df_overview), \n              textAlign = 'center') %>% \nformatStyle(\n    \"Paper name\",\n    fontSize = '10px'\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-ef647f55e5aef633c03d\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ef647f55e5aef633c03d\">{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption>Evaluations (confidence bounds not shown)<\\/caption>\",\"data\":[[\"AI and econ. growth\",\"AI and econ. growth\",\"Advance market commit. (vaccines)\",\"Advance market commit. (vaccines)\",\"Advance market commit. (vaccines)\",\"Banning wildlife trade can boost demand\",\"Banning wildlife trade can boost demand\",\"CBT Human K, Ghana\",\"CBT Human K, Ghana\",\"Celeb. Twitter promo, Indonesia vacc.\",\"Celeb. Twitter promo, Indonesia vacc.\",\"Citizen participation in envt. gov. China\",\"Citizen participation in envt. gov. China\",\"Env. fx of prod.: ecological obs\",\"Env. fx of prod.: ecological obs\",\"LT CEA: Resilient foods vs. AGI safety\",\"LT CEA: Resilient foods vs. AGI safety\",\"LT CEA: Resilient foods vs. AGI safety\",\"Nonprofit Govc.: Randomized healthcare DRC\",\"Well-being: Cash vs. psychotherapy\",\"Well-being: Cash vs. psychotherapy\"],[\"Aghion, P., Jones, B.F.,   and Jones, C.I., 2017.  Artificial Intelligence and Economic Growth \",\"Aghion, P., Jones, B.F.,   and Jones, C.I., 2017.  Artificial Intelligence and Economic Growth\",\"Kremer, M., Levin, J. and Snyder, C.M., 2020, May. Advance Market Commitments: Insights from Theory and Experience. In AEA Papers and Proceedings (Vol. 110, pp. 269-73).\",\"Kremer, M., Levin, J. and Snyder, C.M., 2020, May. Advance Market Commitments: Insights from Theory and Experience. In AEA Papers and Proceedings (Vol. 110, pp. 269-73).\",\"Kremer, M., Levin, J. and Snyder, C.M., 2020, May. Advance Market Commitments: Insights from Theory and Experience. In AEA Papers and Proceedings (Vol. 110, pp. 269-73).\",\"Banning wildlife trade can boost demand for unregulated threatened species\",\"Banning wildlife trade can boost demand for unregulated threatened species\",\"Mental Health Therapy as a Core Strategy for Increasing Human Capital: Evidence from Ghana (renamed \\\"Cognitive Behavioral Therapy among Ghana's Rural Poor Is Effective Regardless of Baseline Mental Distress\\\")\",\"Mental Health Therapy as a Core Strategy for Increasing Human Capital: Evidence from Ghana (renamed \\\"Cognitive Behavioral Therapy among Ghana's Rural Poor Is Effective Regardless of Baseline Mental Distress\\\")\",\"When Celebrities Speak: A Nationwide Twitter Experiment Promoting Vaccination In Indonesia (Alatas et al, 2019/2021)\",\"When Celebrities Speak: A Nationwide Twitter Experiment Promoting Vaccination In Indonesia (Alatas et al, 2019/2021)\",\"Does the Squeaky Wheel Get More Grease? The Direct and Indirect Effects of Citizen Participation on Environmental Governance in China\",\"Does the Squeaky Wheel Get More Grease? The Direct and Indirect Effects of Citizen Participation on Environmental Governance in China\",\"\\\"The Environmental Effects of Economic Production: Evidence from Ecological Observations\\n (previous title: Economic Production and Biodiversity in the United States)\\\"`\",\"\\\"The Environmental Effects of Economic Production: Evidence from Ecological Observations\\n (previous title: Economic Production and Biodiversity in the United States)\\\"\",\"Long term cost-effectiveness of resilient foods for global catastrophes compared to artificial general intelligence safety (Denkenberger et al)\",\"Long term cost-effectiveness of resilient foods for global catastrophes compared to artificial general intelligence safety (Denkenberger et al)\",\"Long term cost-effectiveness of resilient foods for global catastrophes compared to artificial general intelligence safety (Denkenberger et al)\",\"The Governance Of Non-Profits And Their Social Impact: Evidence From A Randomized Program In Healthcare In DRC\",\"The Comparative Impact of Cash Transfers and a Psychotherapy Program on Psychological and Economic Well-being\",\"The Comparative Impact of Cash Transfers and a Psychotherapy Program on Psychological and Economic Well-being\"],[\"Phil Trammel\",\"Seth Benzell\",\"Dan Tortorice\",\"David Manheim\",\"Joel Tan\",\"Anonymous_8\",\"Liew Jia Huan\",\"Anonymous_17\",\"Anonymous_4\",\"Anirugh Tagat\",\"Anonymous_14\",\"Anonymous_10\",\"Robert Kubinec\",\"Anonymous_19\",\"Elias Cisneros\",\"Alex Bates\",\"Anca Hanea\",\"Scott Janzwood\",\"Anonymous_2\",\"Anonymous_21\",\"Hannah Metzler\"],[\"macroeconomics\",\"macroeconomics\",\"policy\",\"policy\",\"policy\",\"conservation\",\"conservation\",\"GH&amp;D\",\"GH&amp;D\",\"GH&amp;D\",\"GH&amp;D\",\"Environment\",\"Environment\",\"Environment\",\"Environment\",\"long-term-relevant \",\"long-term-relevant \",\"long-term-relevant \",\"GH&amp;D\",\"GH&amp;D\",\"GH&amp;D\"],[\"Artificial intelligence\",\"Artificial intelligence\",\"economics\",\"economics\",\"economics\",\"biodiversity\",\"biodiversity\",null,null,\"biorisk\",\"biorisk\",null,null,null,null,\"quantitative\",\"quantitative\",\"quantitative\",null,null,null],[\"internal-from-syllabus-agenda-policy-database\",\"internal-from-syllabus-agenda-policy-database\",\"internal-from-syllabus-agenda-policy-database\",\"internal-from-syllabus-agenda-policy-database\",\"internal-from-syllabus-agenda-policy-database\",\"submitted\",\"submitted\",\"internal-NBER\",\"internal-NBER\",\"internal-NBER\",\"internal-NBER\",\"suggested - externally\",\"suggested - externally\",\"internal-NBER\",\"internal-NBER\",\"submitted\",\"submitted\",\"submitted\",\"internal-NBER\",\"internal-NBER\",\"internal-NBER\"],[\"Agreed\",\"Agreed\",\"Agreed\",\"Agreed\",\"Agreed\",\"Agreed\",\"Agreed\",\"Emailed\",\"Emailed\",\"Emailed\",\"Emailed\",\"Acknowledged\",\"Acknowledged\",\"Agreed\",\"Agreed\",\"Agreed\",\"Agreed\",\"Agreed\",\"Emailed\",\"Acknowledged\",\"Acknowledged\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th>Paper Abbreviation<\\/th>\\n      <th>Paper name<\\/th>\\n      <th>Evaluator Name<\\/th>\\n      <th>Main category<\\/th>\\n      <th>Category 2<\\/th>\\n      <th>Main source<\\/th>\\n      <th>Author contact<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":5,\"columnDefs\":[{\"width\":\"150px\",\"targets\":1}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100],\"rowCallback\":\"function(row, data, displayNum, displayIndex, dataIndex) {\\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'text-align':'center'});\\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'center'});\\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'center'});\\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'center'});\\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'text-align':'center'});\\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'text-align':'center'});\\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'font-size':'10px'});\\n}\"},\"selection\":{\"mode\":\"multiple\",\"selected\":null,\"target\":\"row\",\"selectable\":null}},\"evals\":[\"options.rowCallback\"],\"jsHooks\":[]}</script>\n```\n:::\n\n```{.r .cell-code}\nrm(evals_pub_df_overview)\n```\n:::\n\n\n:::\n\n<!-- Todo: make this smaller, get it to fit on the page better, more user-friendly -->\n\n#### Evaluation metrics (ratings) {-}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrename_dtstuff <- function(df){\n  df %>%  \n  rename(\n    \"Paper Abbreviation\" = paper_abbrev,\n    \"Evaluator Name\" = eval_name,\n    \"Advancing knowledge\" = adv_knowledge,\n    \"Methods\" = methods,\n    \"Logic & comm.\" = logic_comms,\n    \"Real world engagement\" = real_world,\n    \"Global priorities relevance\" = gp_relevance,\n    \"Open Science\" = open_sci\n  )\n}\n```\n:::\n\n\n\nNext, a preview of the evaluations, focusing on the 'middle ratings and predictions':\n\n::: column-body-outset    \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Need to find a way to control column width but it seems to be a problem with DT\n# https://github.com/rstudio/DT/issues/29\n\n\nevals_pub_df <- evals_pub %>%\n  # Arrange data\n  arrange(paper_abbrev, eval_name, overall) %>%\n  \n  # Select and rename columns\n  dplyr::select(paper_abbrev, eval_name, all_of(rating_cats)) %>%\n rename_dtstuff \n\n\n(\n evals_pub_dt <- evals_pub_df %>%  \n  # Convert to a datatable and apply styling\n  datatable(\n    caption = \"Evaluations and predictions (confidence bounds not shown)\", \n    filter = 'top',\n    rownames = FALSE,\n    options = list(pageLength = 5, \n            columnDefs = list(list(width = '150px', targets = 0)))) %>% \n  formatStyle(columns = 2:ncol(evals_pub_df), \n              textAlign = 'center')\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-25816a60372109cf4014\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-25816a60372109cf4014\">{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"40\\\" data-max=\\\"92\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"25\\\" data-max=\\\"97\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"50\\\" data-max=\\\"95\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"45\\\" data-max=\\\"85\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"50\\\" data-max=\\\"100\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"50\\\" data-max=\\\"100\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"45\\\" data-max=\\\"95\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption>Evaluations and predictions (confidence bounds not shown)<\\/caption>\",\"data\":[[\"AI and econ. growth\",\"AI and econ. growth\",\"Advance market commit. (vaccines)\",\"Advance market commit. (vaccines)\",\"Advance market commit. (vaccines)\",\"Banning wildlife trade can boost demand\",\"Banning wildlife trade can boost demand\",\"CBT Human K, Ghana\",\"CBT Human K, Ghana\",\"Celeb. Twitter promo, Indonesia vacc.\",\"Celeb. Twitter promo, Indonesia vacc.\",\"Citizen participation in envt. gov. China\",\"Citizen participation in envt. gov. China\",\"Env. fx of prod.: ecological obs\",\"Env. fx of prod.: ecological obs\",\"LT CEA: Resilient foods vs. AGI safety\",\"LT CEA: Resilient foods vs. AGI safety\",\"LT CEA: Resilient foods vs. AGI safety\",\"Nonprofit Govc.: Randomized healthcare DRC\",\"Well-being: Cash vs. psychotherapy\",\"Well-being: Cash vs. psychotherapy\"],[\"Phil Trammel\",\"Seth Benzell\",\"Dan Tortorice\",\"David Manheim\",\"Joel Tan\",\"Anonymous_8\",\"Liew Jia Huan\",\"Anonymous_17\",\"Anonymous_4\",\"Anirugh Tagat\",\"Anonymous_14\",\"Anonymous_10\",\"Robert Kubinec\",\"Anonymous_19\",\"Elias Cisneros\",\"Alex Bates\",\"Anca Hanea\",\"Scott Janzwood\",\"Anonymous_2\",\"Anonymous_21\",\"Hannah Metzler\"],[92,80,80,80,79,75,75,75,75,85,62,80,90,70,88,40,80,65,65,75,90],[97,75,90,25,90,70,80,60,65,90,55,76,90,70,90,30,80,70,70,70,90],[70,80,80,95,70,80,50,90,60,80,55,72,80,70,75,50,70,null,60,90,90],[45,70,80,75,70,70,70,70,75,85,70,67,80,75,80,60,85,80,55,75,80],[null,null,null,null,90,90,90,50,75,100,55,91,90,60,95,null,null,null,55,75,100],[92,90,95,60,90,80,65,50,75,100,70,92,90,80,95,90,85,80,80,90,100],[80,95,90,null,50,70,50,90,50,80,45,48,70,65,90,70,73,null,45,50,70]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th>Paper Abbreviation<\\/th>\\n      <th>Evaluator Name<\\/th>\\n      <th>overall<\\/th>\\n      <th>Advancing knowledge<\\/th>\\n      <th>Methods<\\/th>\\n      <th>Logic &amp; comm.<\\/th>\\n      <th>Real world engagement<\\/th>\\n      <th>Global priorities relevance<\\/th>\\n      <th>Open Science<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":5,\"columnDefs\":[{\"width\":\"150px\",\"targets\":0},{\"className\":\"dt-right\",\"targets\":[2,3,4,5,6,7,8]}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100],\"rowCallback\":\"function(row, data, displayNum, displayIndex, dataIndex) {\\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'text-align':'center'});\\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'center'});\\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'center'});\\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'center'});\\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'text-align':'center'});\\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'text-align':'center'});\\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'text-align':'center'});\\nvar value=data[8]; $(this.api().cell(row, 8).node()).css({'text-align':'center'});\\n}\"},\"selection\":{\"mode\":\"multiple\",\"selected\":null,\"target\":\"row\",\"selectable\":null}},\"evals\":[\"options.rowCallback\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n:::\n\n\n\n\\ \n\n<!-- Todo -- Present these, including bounds, in a useful way -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# we did not seem to be using all_evals_dt_ci so I removed it to improve readability\nevals_pub %>%\n  arrange(paper_abbrev, eval_name) %>%\n  dplyr::select(paper_abbrev, eval_name, conf_overall, all_of(rating_cats), matches(\"ub_imp|lb_imp\")) %>%\n  rename_dtstuff %>% \n  DT::datatable(\n    caption = \"Evaluations and (imputed*) confidence bounds)\", \n    filter = 'top',\n    rownames= FALSE,\n    options = list(pageLength = 5)\n    )\n```\n:::\n\n\n\n\n\n\n::: {.callout-note collapse=\"true\"}\n##### Next consider...\n\n- Composition of research evaluated\n     - By field (economics, psychology, etc.)\n     - By subfield of economics \n     - By topic/cause area (Global health, economic development, impact of technology, global catastrophic risks, etc.    )\n     - By source (submitted, identified with author permission, direct evaluation)\n    \n- Timing of intake and evaluation^[Consider: timing might be its own section or chapter; this is a major thing journals track, and we want to keep track of ourselves]\n\n:::\n\n#### Paper selection {-}\n\nThe Sankey diagram below starts with the papers we prioritized for likely *Unjournal* evaluation:^[Those marked as 'considering' in the Airtable].\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Add in the 3 different evaluation input sources\n#update to be automated rather than hard-coded - to look at David's work here\n\npapers_considered <- all_papers_p %>% \n  nrow()\n\npapers_deprio <- all_papers_p %>% \n  filter(`stage of process/todo` ==  \"de-prioritized\") %>% \n  nrow()\n\npapers_evaluated <- all_papers_p %>% \n  filter(`stage of process/todo` %in% c(\"published\",\n                                        \"contacting/awaiting_authors_response_to_evaluation\",\n                                        \"awaiting_publication_ME_comments\",\"awaiting_evaluations\")) %>% \n  nrow()\n\npapers_complete <- all_papers_p %>% \n  filter(`stage of process/todo` ==  \"published\") %>%\n  nrow()\n\npapers_in_progress <-  papers_evaluated - papers_complete\n\npapers_still_in_consideration <-  all_papers_p %>% filter(`stage of process/todo` ==  \"considering\") %>% nrow()\n\n\n#todo: adjust wording of hover notes ('source, target...etc')\n\nfig <- plot_ly(\n  type = \"sankey\",\n  orientation = \"h\",\n  \n  node = list(\n    label = c(\"Prioritized\", \"Evaluating\", \"Complete\", \"In progress\", \"Still in consideration\", \"De-prioritized\"),\n    color = c(\"orange\", \"green\", \"green\", \"orange\", \"orange\", \"red\"),\n    #Todo: adjust 'location' to group these left to right\n    pad = 15,\n    thickness = 20,\n    line = list(\n      color = \"black\",\n      width = 0.5\n    )\n  ),\n  \n  link = list(\n    source = c(0,1,1,0,0),\n    target = c(1,2,3,4,5),\n    value =  c(\n      papers_evaluated,\n      papers_complete,\n      papers_in_progress,\n      papers_still_in_consideration,\n      papers_deprio\n    ))\n)\nfig <- fig %>% layout(\n  title = \"Unjournal paper funnel\",\n  font = list(\n    size = 10\n  )\n)\n\nfig \n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-e196a322081027383107\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-e196a322081027383107\">{\"x\":{\"visdat\":{\"95815bd5fe3d\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"95815bd5fe3d\",\"attrs\":{\"95815bd5fe3d\":{\"orientation\":\"h\",\"node\":{\"label\":[\"Prioritized\",\"Evaluating\",\"Complete\",\"In progress\",\"Still in consideration\",\"De-prioritized\"],\"color\":[\"orange\",\"green\",\"green\",\"orange\",\"orange\",\"red\"],\"pad\":15,\"thickness\":20,\"line\":{\"color\":\"black\",\"width\":0.5}},\"link\":{\"source\":[0,1,1,0,0],\"target\":[1,2,3,4,5],\"value\":[11,10,1,22,1]},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"sankey\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"title\":\"Unjournal paper funnel\",\"font\":{\"size\":10},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"orientation\":\"h\",\"node\":{\"label\":[\"Prioritized\",\"Evaluating\",\"Complete\",\"In progress\",\"Still in consideration\",\"De-prioritized\"],\"color\":[\"orange\",\"green\",\"green\",\"orange\",\"orange\",\"red\"],\"pad\":15,\"thickness\":20,\"line\":{\"color\":\"black\",\"width\":0.5}},\"link\":{\"source\":[0,1,1,0,0],\"target\":[1,2,3,4,5],\"value\":[11,10,1,22,1]},\"type\":\"sankey\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\nTodo: ^[Make interactive/dashboards of the elements below]\n\n#### Paper categories {-}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nevals_pub %>% \n  select(paper_abbrev, starts_with(\"cat_\")) %>%\n  distinct() %>% \n  pivot_longer(cols = starts_with(\"cat_\"), names_to = \"CatNum\", values_to = \"Category\") %>% \n  group_by(CatNum, Category) %>% \n  count() %>% \n  filter(!is.na(Category)) %>% \n  mutate(Category = str_to_title(Category),\n         CatNum = ordered(CatNum, \n                          levels = c(\"cat_1\", \"cat_2\", \"cat_3\"),\n                          labels = c(\"Primary\", \"Secondary\", \"Tertiary\"))) %>%\n  ggplot(aes(x = reorder(Category, -n), y = n)) +\n  geom_bar(aes(fill = CatNum), stat = \"identity\", color = \"grey30\") + \n  labs(x = \"Paper category\", y = \"Count\", fill = \"Cat Level\",\n       title = \"Paper categories represented in pilot data\") +\n  theme_bw() +\n  facet_grid(~CatNum, scales=\"free_x\", space=\"free_x\") +\n  theme(axis.text.x=element_text(angle=45,hjust=1)) +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](evaluation_data_analysis_files/figure-html/all_categories-1.png){width=672}\n:::\n:::\n\n\n#### Paper source {-}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bar plot\nevals_pub %>% \n  rowwise() %>% \n  mutate(source_main = str_replace_all(string = source_main, \n                                       pattern = \"-\", \n                                       replace = \" \") %>% str_to_title()) %>%\n  select(paper_abbrev, source_main) %>% \n  distinct() %>%\n  ggplot(aes(x = source_main)) + \n  geom_bar(position = \"stack\", stat = \"count\", color = \"grey30\", fill = \"grey80\") +\n  labs(x = \"Source\", y = \"Count\") +\n  labs(title = \"Pool of research/evaluations by paper source\") +\n  theme_bw() +\n  theme(text = element_text(size = 15)) +\n  scale_x_discrete(labels = function(x) str_wrap(x, width = 20))\n```\n\n::: {.cell-output-display}\n![](evaluation_data_analysis_files/figure-html/paper_source-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# JB: Most of these should probably be cleaned in data storage\n\nlibrary(RColorBrewer)  # for color palettes\n\n# paper statuses that are considered \"being evaluated\"\neval_true = c(\"published\", \n              \"contacting/awaiting_authors_response_to_evaluation\",\n              \"awaiting_publication_ME_comments\",\n              \"awaiting_evaluations\")\n\n# Is the paper being evaluated? \nall_papers_p <- all_papers_p %>% \n  mutate(is_evaluated = if_else(`stage of process/todo` %in% eval_true, TRUE, FALSE))\n\n# main source clean\nall_papers_p <- all_papers_p %>% \n  mutate(source_main = case_when(source_main == \"NA\" ~ \"Not applicable\",\n                                 source_main == \"internal-from-syllabus-agenda-policy-database\" ~ \"Internal: syllabus, agenda, etc.\",\n                                 is.na(source_main) ~ \"Unknown\",\n                                 TRUE ~ source_main))\n\nall_papers_p %>% \nggplot(aes(x = fct_infreq(source_main), fill = is_evaluated)) + \n  geom_bar(position = \"stack\", stat = \"count\") +\n  labs(x = \"Source\", y = \"Count\", fill = \"Selected for\\nevaluation?\") +\n  coord_flip() + # flipping the coordinates to have categories on y-axis (on the left)\n  labs(title = \"Evaluations by source of the paper\") +\n  theme_bw() +\n  theme(text = element_text(size = 15)) +\n  scale_fill_brewer(palette = \"Set1\") +\n  scale_x_discrete(labels = function(x) str_wrap(x, width = 20))\n```\n\n::: {.cell-output-display}\n![](evaluation_data_analysis_files/figure-html/data clean-1.png){width=672}\n:::\n:::\n\n\n\n## The distribution of ratings and predictions {-}\n\nNext, we present the ratings and predictions along with 'uncertainty measures'.^[We use \"ub imp\" (and \"lb imp\") to denote the upper and lower bounds given by evaluators.] Where evaluators gave only a 1-5 confidence level^[More or less, the ones who report a level for 'conf overall', although some people did this for some but not others], we use the imputations discussed and coded above. \n\n\n- For each category and prediction (overall and by paper)\n\n::: {.cell}\n\n```{.r .cell-code}\n# evals_pub %>% \n#   select(matches(\"overall\")) %>% \n#   view()\n```\n:::\n\n\n\n::: column-body-outset\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Generate a color palette with more colors\ncolor_count <- length(unique(evals_pub$paper_abbrev))\ncolor_palette <- colorRampPalette(brewer.pal(8, \"Set1\"))(color_count)\n\n# set one \"set\" of dodge width values across layers\npd = position_dodge(width = 0.8)\n\n# Dot plot\ng1 <- evals_pub %>% \n  ggplot(aes(x = paper_abbrev, y = overall, \n             text = paste0('Evaluator: ', eval_name,   # tooltip data\n                           '<br>Rating [CI]: ', overall, \" [\", overall_lb_imp, \", \", overall_ub_imp, \"]\"))) +\n  geom_point(aes(color = paper_abbrev), \n             stat = \"identity\", size = 2, shape = 18, stroke = 1, \n             position = pd) +\n  geom_linerange(aes(ymin = overall_lb_imp, ymax = overall_ub_imp, color = paper_abbrev), \n                 position = pd) +\n  geom_text(data = subset(evals_pub, str_detect(eval_name, \"Anonymous\")),\n            aes(label = \"anon.\"), size=3) +\n  coord_flip() + # flipping the coordinates to have categories on y-axis (on the left)\n  labs(x = \"Paper\", y = \"Overall score\",\n       title = \"Overall scores of evaluated papers\") +\n  theme_bw() +\n  theme(text = element_text(size = 15)) +\n  theme(legend.position = \"none\") +\n  scale_x_discrete(labels = function(x) str_wrap(x, width = 20)) + \n    scale_color_manual(values = color_palette)\n\n\nggplotly(g1, tooltip = c(\"text\"))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-c5c88876062d77f756b4\" style=\"width:100%;height:835px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c5c88876062d77f756b4\">{\"x\":{\"data\":[{\"x\":[80,79,80],\"y\":[1,1.2666666666666666,0.73333333333333328],\"text\":[\"Evaluator: David Manheim<br>Rating [CI]: 80 [70, 90]\",\"Evaluator: Joel Tan<br>Rating [CI]: 79 [59, 94]\",\"Evaluator: Dan Tortorice<br>Rating [CI]: 80 [72, 88]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(228,26,28,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(228,26,28,1)\"}},\"hoveron\":\"points\",\"name\":\"Advance market commit. (vaccines)\",\"legendgroup\":\"Advance market commit. (vaccines)\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[10,15,8],\"arrayminus\":[10,20,8],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(228,26,28,1)\"},\"frame\":null},{\"x\":[80,92],\"y\":[2.2000000000000002,1.8],\"text\":[\"Evaluator: Seth Benzell<br>Rating [CI]: 80 [70, 90]\",\"Evaluator: Phil Trammel<br>Rating [CI]: 92 [80, 100]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(93,103,149,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(93,103,149,1)\"}},\"hoveron\":\"points\",\"name\":\"AI and econ. growth\",\"legendgroup\":\"AI and econ. growth\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[10,8],\"arrayminus\":[10,12],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(93,103,149,1)\"},\"frame\":null},{\"x\":[75,75],\"y\":[3.2000000000000002,2.7999999999999998],\"text\":[\"Evaluator: Liew Jia Huan<br>Rating [CI]: 75 [67, 83]\",\"Evaluator: Anonymous_8<br>Rating [CI]: 75 [NA, NA]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(67,153,122,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(67,153,122,1)\"}},\"hoveron\":\"points\",\"name\":\"Banning wildlife trade can boost demand\",\"legendgroup\":\"Banning wildlife trade can boost demand\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[8,null],\"arrayminus\":[8,null],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(67,153,122,1)\"},\"frame\":null},{\"x\":[75,75],\"y\":[4.2000000000000002,3.7999999999999998],\"text\":[\"Evaluator: Anonymous_4<br>Rating [CI]: 75 [67, 83]\",\"Evaluator: Anonymous_17<br>Rating [CI]: 75 [70, 84]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(101,142,103,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(101,142,103,1)\"}},\"hoveron\":\"points\",\"name\":\"CBT Human K, Ghana\",\"legendgroup\":\"CBT Human K, Ghana\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[8,9],\"arrayminus\":[8,5],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(101,142,103,1)\"},\"frame\":null},{\"x\":[62,85],\"y\":[5.2000000000000002,4.7999999999999998],\"text\":[\"Evaluator: Anonymous_14<br>Rating [CI]: 62 [47, 77]\",\"Evaluator: Anirugh Tagat<br>Rating [CI]: 85 [77, 93]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(163,83,144,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(163,83,144,1)\"}},\"hoveron\":\"points\",\"name\":\"Celeb. Twitter promo, Indonesia vacc.\",\"legendgroup\":\"Celeb. Twitter promo, Indonesia vacc.\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[15,8],\"arrayminus\":[15,8],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(163,83,144,1)\"},\"frame\":null},{\"x\":[90,80],\"y\":[6.2000000000000002,5.7999999999999998],\"text\":[\"Evaluator: Robert Kubinec<br>Rating [CI]: 90 [85, 95]\",\"Evaluator: Anonymous_10<br>Rating [CI]: 80 [71, 86]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(243,121,18,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(243,121,18,1)\"}},\"hoveron\":\"points\",\"name\":\"Citizen participation in envt. gov. China\",\"legendgroup\":\"Citizen participation in envt. gov. China\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[5,6],\"arrayminus\":[5,9],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(243,121,18,1)\"},\"frame\":null},{\"x\":[88,70],\"y\":[7.2000000000000002,6.7999999999999998],\"text\":[\"Evaluator: Elias Cisneros<br>Rating [CI]: 88 [84, 92]\",\"Evaluator: Anonymous_19<br>Rating [CI]: 70 [55, 85]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(255,212,34,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(255,212,34,1)\"}},\"hoveron\":\"points\",\"name\":\"Env. fx of prod.: ecological obs\",\"legendgroup\":\"Env. fx of prod.: ecological obs\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[4,15],\"arrayminus\":[4,15],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(255,212,34,1)\"},\"frame\":null},{\"x\":[80,40,65],\"y\":[8,7.7333333333333334,8.2666666666666675],\"text\":[\"Evaluator: Anca Hanea<br>Rating [CI]: 80 [60, 90]\",\"Evaluator: Alex Bates<br>Rating [CI]: 40 [20, 60]\",\"Evaluator: Scott Janzwood<br>Rating [CI]: 65 [50, 80]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(215,179,46,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(215,179,46,1)\"}},\"hoveron\":\"points\",\"name\":\"LT CEA: Resilient foods vs. AGI safety\",\"legendgroup\":\"LT CEA: Resilient foods vs. AGI safety\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[10,20,15],\"arrayminus\":[20,20,15],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(215,179,46,1)\"},\"frame\":null},{\"x\":[65],\"y\":[9],\"text\":\"Evaluator: Anonymous_2<br>Rating [CI]: 65 [55, 74]\",\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(184,95,73,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(184,95,73,1)\"}},\"hoveron\":\"points\",\"name\":\"Nonprofit Govc.: Randomized healthcare DRC\",\"legendgroup\":\"Nonprofit Govc.: Randomized healthcare DRC\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[9],\"arrayminus\":[10],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(184,95,73,1)\"},\"frame\":null},{\"x\":[90,75],\"y\":[10.199999999999999,9.8000000000000007],\"text\":[\"Evaluator: Hannah Metzler<br>Rating [CI]: 90 [75, 100]\",\"Evaluator: Anonymous_21<br>Rating [CI]: 75 [65, 85]\"],\"type\":\"scatter\",\"mode\":\"markers+lines\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(247,129,191,1)\",\"opacity\":1,\"size\":7.559055118110237,\"symbol\":\"diamond\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(247,129,191,1)\"}},\"hoveron\":\"points\",\"name\":\"Well-being: Cash vs. psychotherapy\",\"legendgroup\":\"Well-being: Cash vs. psychotherapy\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"opacity\":1,\"line\":{\"color\":\"transparent\"},\"error_x\":{\"array\":[10,10],\"arrayminus\":[15,10],\"type\":\"data\",\"width\":0,\"symmetric\":false,\"color\":\"rgba(247,129,191,1)\"},\"frame\":null},{\"x\":[65,75,75,80,62,75,70,75],\"y\":[9,4,3,6,5,4,7,10],\"text\":[\"anon.\",\"anon.\",\"anon.\",\"anon.\",\"anon.\",\"anon.\",\"anon.\",\"anon.\"],\"hovertext\":[\"Evaluator: Anonymous_2<br>Rating [CI]: 65 [55, 74]\",\"Evaluator: Anonymous_4<br>Rating [CI]: 75 [67, 83]\",\"Evaluator: Anonymous_8<br>Rating [CI]: 75 [NA, NA]\",\"Evaluator: Anonymous_10<br>Rating [CI]: 80 [71, 86]\",\"Evaluator: Anonymous_14<br>Rating [CI]: 62 [47, 77]\",\"Evaluator: Anonymous_17<br>Rating [CI]: 75 [70, 84]\",\"Evaluator: Anonymous_19<br>Rating [CI]: 70 [55, 85]\",\"Evaluator: Anonymous_21<br>Rating [CI]: 75 [65, 85]\"],\"textfont\":{\"size\":11.338582677165356,\"color\":\"rgba(0,0,0,1)\"},\"type\":\"scatter\",\"mode\":\"text\",\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":45.592730962593976,\"r\":7.3059360730593621,\"b\":45.200867118675333,\"l\":190.28642590286427},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":19.9252801992528},\"title\":{\"text\":\"Overall scores of evaluated papers\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":23.910336239103366},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[16,104],\"tickmode\":\"array\",\"ticktext\":[\"20\",\"40\",\"60\",\"80\",\"100\"],\"tickvals\":[20,40,60,80,100],\"categoryorder\":\"array\",\"categoryarray\":[\"20\",\"40\",\"60\",\"80\",\"100\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":15.940224159402241},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Overall score\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":19.9252801992528}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,10.6],\"tickmode\":\"array\",\"ticktext\":[\"Advance market<br />commit. (vaccines)\",\"AI and econ. growth\",\"Banning wildlife<br />trade can boost<br />demand\",\"CBT Human K, Ghana\",\"Celeb. Twitter<br />promo, Indonesia<br />vacc.\",\"Citizen<br />participation in<br />envt. gov. China\",\"Env. fx of prod.:<br />ecological obs\",\"LT CEA: Resilient<br />foods vs. AGI safety\",\"Nonprofit Govc.:<br />Randomized<br />healthcare DRC\",\"Well-being: Cash vs.<br />psychotherapy\"],\"tickvals\":[1,2,3,4,5,6.0000000000000009,7,8,9,10],\"categoryorder\":\"array\",\"categoryarray\":[\"Advance market<br />commit. (vaccines)\",\"AI and econ. growth\",\"Banning wildlife<br />trade can boost<br />demand\",\"CBT Human K, Ghana\",\"Celeb. Twitter<br />promo, Indonesia<br />vacc.\",\"Citizen<br />participation in<br />envt. gov. China\",\"Env. fx of prod.:<br />ecological obs\",\"LT CEA: Resilient<br />foods vs. AGI safety\",\"Nonprofit Govc.:<br />Randomized<br />healthcare DRC\",\"Well-being: Cash vs.<br />psychotherapy\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":15.940224159402243},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Paper\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":19.9252801992528}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":15.940224159402241}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"95817410bfa\":{\"x\":{},\"y\":{},\"text\":{},\"colour\":{},\"type\":\"scatter\"},\"95813f794dce\":{\"x\":{},\"y\":{},\"text\":{},\"ymin\":{},\"ymax\":{},\"colour\":{}},\"958134e32ff0\":{\"x\":{},\"y\":{},\"text\":{},\"label\":{}}},\"cur_data\":\"95817410bfa\",\"visdat\":{\"95817410bfa\":[\"function (y) \",\"x\"],\"95813f794dce\":[\"function (y) \",\"x\"],\"958134e32ff0\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n\n```{.r .cell-code}\n#TODO: \n# - Improve the 'anon' super/subscript on the bars (or do something else that allows us to quickly see which ones were anonymous)\n# - Sort by average evaluation score\n```\n:::\n\n:::\n\nBelow, we are building an interactive dashboard.^[We are working to enable a range of presentations, aggregations, and analyses (your suggestions are welcome), including reasonable approaches to incorporating evaluator uncertainty]\n\n### Shiny dashboard {-}\n\n::: column-body-outset\n\n\n```{=html}\n<!-- Currently this is a random Shiny app -->\n<iframe height=\"800\" width=\"120%\" frameborder=\"no\" src=\"https://unjournal.shinyapps.io/DataExplorer/\"> </iframe>\n\n<!-- # Todo: (@julia)\n- link the code used to generate the shiny app (or something allowing people to see how the data/statistics part iss constructed) \n\n- 'merits journal' and 'predicted journal' need rescaling in the visualisation (or as a workaround, make them a separate Shiny) \n\n-->\n\n\n```\n\n\nYou can see this dashboard on it's own hosted [here](https://unjournal.shinyapps.io/DataExplorer/).\n\n:::\n\n::: {.callout-note collapse=\"true\"}\n## Future vis\n\nSpider or radial chart \n\nEach rating is a dimension or attribute (potentially normalized)\npotentially superimpose a 'circle' for the suggested weighting or overall. \n\nEach paper gets its own spider, with all others (or the average) in faded color behind it as a comparator. \n\nIdeally user can switch on/off \n\nBeware -- people may infer things from the shape's size\n\n::: \n\n\n::: column-body-outset\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# JB: what is the purpose of this table? It's very large and I'm not totally\n# sure what it's doing so I'm just turning it off for now\nunit.scale = function(x) (x*100 - min(x*100)) / (max(x*100) - min(x*100))\n\nevaluations_table <- evals_pub %>%\n  select(paper_abbrev, eval_name, cat_1, \n         source_main, overall, adv_knowledge,\n         methods, logic_comms, journal_predict) %>%\n  arrange(desc(paper_abbrev))\n\nformattable(\n  evaluations_table,\n  list(\n    #area(col = 5:8) ~ function(x) percent(x / 100, digits = 0),\n    area(col = 5:8) ~ color_tile(\"#FA614B66\",\"#3E7DCC\"),\n    `journal_predict` = proportion_bar(\"#DeF7E9\", unit.scale)\n  )\n)\n```\n:::\n\n:::\n\n\n### Sources of variation {-}\n\nNext, look for systematic variation in the ratings \n\n- By field and topic area of paper\n\n- By submission/selection route\n\n- By evaluation manager (or their seniority, or whether they are US/Commonwealth/Other)^[DR: My theory is that people in commonwealth countries target a 70+ as 'strong' (because of their marking system) and that may drive a bias.]\n\n... perhaps building a model of this. We are looking for systematic 'biases and trends', loosely speaking, to help us better understand how our evaluation system is working.\n\n\\\n\n\n### Relationship among the ratings (and predictions) {-} \n\n::: {.callout-note collapse=\"true\"}\n## Next steps (suggested analyses)\n\n- Correlation matrix\n\n- ANOVA\n\n- PCA (Principle components)\n\n- With other 'control' factors?\n\n- How do the specific measures predict the aggregate ones (overall rating, merited publication)\n    - CF 'our suggested weighting'\n\n::: \n\n\nNext chapter (analysis): *aggregation of evaluator judgment*\n\n\n::: {.callout-note collapse=\"true\"}\n## Scoping our future coverage\n\nWe have funding to evaluate roughly 50-70 papers/projects per year, given our proposed incentives.\n\nConsider:\n\n- How many relevant NBER papers come out per year?\n\n- How much relevant work in other prestige archives?\n\n- What quotas do we want (by cause, etc.) and how feasible are these?\n\n::: \n\n",
    "supporting": [
      "evaluation_data_analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.28/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js\"></script>\n<link href=\"../site_libs/nouislider-7.0.10/jquery.nouislider.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/nouislider-7.0.10/jquery.nouislider.min.js\"></script>\n<link href=\"../site_libs/selectize-0.12.0/selectize.bootstrap3.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/selectize-0.12.0/selectize.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n<script src=\"../site_libs/plotly-binding-4.10.2/plotly.js\"></script>\n<script src=\"../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<link href=\"../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}