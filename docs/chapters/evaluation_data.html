<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.113">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>The Unjournal evaluations: data and analysis - 1&nbsp; Evaluation data: description, exploration, checks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: 1;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../index.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script async="" src="https://hypothes.is/embed.js"></script><script src="../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.20/datatables.js"></script><script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="../site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="../site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="../site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="../site_libs/selectize-0.12.0/selectize.min.js"></script><link href="../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="../site_libs/plotly-binding-4.10.0/plotly.js"></script><script src="../site_libs/typedarray-0.1/typedarray.min.js"></script><link href="../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">
<span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Evaluation data: description, exploration, checks</span>
</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">The Unjournal evaluations: data and analysis</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/daaronr/unjournaldata/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/evaluation_data.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Evaluation data: description, exploration, checks</span></a>
  </div>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#reconcile-uncertainty-ratings-and-cis" id="toc-reconcile-uncertainty-ratings-and-cis" class="nav-link active" data-scroll-target="#reconcile-uncertainty-ratings-and-cis">Reconcile uncertainty ratings and CIs</a></li>
  <li>
<a href="#basic-presentation" id="toc-basic-presentation" class="nav-link" data-scroll-target="#basic-presentation"><span class="toc-section-number">2</span>  Basic presentation</a>
  <ul class="collapse">
<li>
<a href="#what-sorts-of-papersprojects-are-we-considering-and-evaluating" id="toc-what-sorts-of-papersprojects-are-we-considering-and-evaluating" class="nav-link" data-scroll-target="#what-sorts-of-papersprojects-are-we-considering-and-evaluating"><span class="toc-section-number">2.1</span>  What sorts of papers/projects are we considering and evaluating?</a>
  <ul class="collapse">
<li><a href="#the-distribution-of-ratings-and-predictions" id="toc-the-distribution-of-ratings-and-predictions" class="nav-link" data-scroll-target="#the-distribution-of-ratings-and-predictions">The distribution of ratings and predictions</a></li>
  <li><a href="#relationship-among-the-ratings-and-predictions" id="toc-relationship-among-the-ratings-and-predictions" class="nav-link" data-scroll-target="#relationship-among-the-ratings-and-predictions">Relationship among the ratings (and predictions)</a></li>
  </ul>
</li>
  <li><a href="#aggregation-of-expert-opinion-modeling" id="toc-aggregation-of-expert-opinion-modeling" class="nav-link" data-scroll-target="#aggregation-of-expert-opinion-modeling"><span class="toc-section-number">2.2</span>  Aggregation of expert opinion (modeling)</a></li>
  <li>
<a href="#notes-on-sources-and-approaches" id="toc-notes-on-sources-and-approaches" class="nav-link" data-scroll-target="#notes-on-sources-and-approaches"><span class="toc-section-number">2.3</span>  Notes on sources and approaches</a>
  <ul class="collapse">
<li><a href="#explicit-modeling-of-research-quality-for-use-in-prizes-etc." id="toc-explicit-modeling-of-research-quality-for-use-in-prizes-etc." class="nav-link" data-scroll-target="#explicit-modeling-of-research-quality-for-use-in-prizes-etc.">Explicit modeling of ‘research quality’ (for use in prizes, etc.)</a></li>
  </ul>
</li>
  <li><a href="#inter-rater-reliability" id="toc-inter-rater-reliability" class="nav-link" data-scroll-target="#inter-rater-reliability"><span class="toc-section-number">2.4</span>  Inter-rater reliability</a></li>
  <li><a href="#decomposing-variation-dimension-reduction-simple-linear-models" id="toc-decomposing-variation-dimension-reduction-simple-linear-models" class="nav-link" data-scroll-target="#decomposing-variation-dimension-reduction-simple-linear-models"><span class="toc-section-number">2.5</span>  Decomposing variation, dimension reduction, simple linear models</a></li>
  <li><a href="#later-possiblities" id="toc-later-possiblities" class="nav-link" data-scroll-target="#later-possiblities"><span class="toc-section-number">2.6</span>  Later possiblities</a></li>
  <li><a href="#scoping-our-future-coverage" id="toc-scoping-our-future-coverage" class="nav-link" data-scroll-target="#scoping-our-future-coverage"><span class="toc-section-number">2.7</span>  Scoping our future coverage</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/daaronr/unjournaldata/edit/main/chapters/evaluation_data.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/daaronr/unjournaldata/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">
<span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Evaluation data: description, exploration, checks</span>
</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><div class="cell">
<details><summary>load packages</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"code"</span>, <span class="st">"shared_packages_code.R"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#devtools::install_github("rethinkpriorities/rp-r-package")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">rethinkpriorities</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#devtools::install_github("rethinkpriorities/r-noodling-package") #mainly used playing in real time</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">rnoodling</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/">here</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trinker/pacman">pacman</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">formattable</span>, <span class="va">sparkline</span>, install<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">santoku</span>, <span class="va">lme4</span>, <span class="va">huxtable</span>, <span class="va">janitor</span>, <span class="va">emmeans</span>, <span class="va">sjPlot</span>, <span class="va">sjmisc</span>, <span class="va">ggeffects</span>, <span class="va">ggrepel</span>, <span class="va">likert</span>, <span class="va">labelled</span>, <span class="va">plotly</span>, <span class="va">stringr</span>, install<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">ggthemes</span>, <span class="va">paletteer</span>, <span class="va">ggridges</span>, install<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">select</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>knitr.duplicate.label <span class="op">=</span> <span class="st">"allow"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>mc.cores <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html">detectCores</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#rstan_options(auto_write = TRUE)</span></span>
<span></span>
<span><span class="co">#library(hunspell)</span></span>
<span></span>
<span><span class="co">#(brms)</span></span>
<span></span>
<span><span class="co">#devtools::install_github("bergant/airtabler")</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">airtabler</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#remotes::install_github("rmcelreath/rethinking")</span></span>
<span><span class="co">#library(rethinking)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<!-- #| label: aggrecat
#| code-summary: "install aggrecat package"

#devtools::install_github("metamelb-repliCATS/aggreCAT")
-->
<div class="cell">
<details><summary>input from airtable</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">base_id</span> <span class="op">&lt;-</span> <span class="st">"appbPYEw9nURln7Qg"</span></span>
<span></span>
<span><span class="co"># Set your Airtable API key</span></span>
<span><span class="co">#Sys.setenv(AIRTABLE_API_KEY = "") </span></span>
<span><span class="co">#this should be set in my .Renviron file</span></span>
<span></span>
<span></span>
<span><span class="co"># Read data from a specific view</span></span>
<span></span>
<span><span class="va">evals</span> <span class="op">&lt;-</span> <span class="fu">air_get</span><span class="op">(</span>base <span class="op">=</span> <span class="va">base_id</span>, <span class="st">"output_eval"</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">all_pub_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">pub_records</span> <span class="op">&lt;-</span> <span class="fu">air_select</span><span class="op">(</span>base <span class="op">=</span> <span class="va">base_id</span>, table <span class="op">=</span> <span class="st">"crucial_research"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Append the records to the list</span></span>
<span><span class="va">all_pub_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">all_pub_records</span>, <span class="va">pub_records</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># While the length of the records list is 100 (the maximum), fetch more records</span></span>
<span><span class="kw">while</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">pub_records</span><span class="op">)</span> <span class="op">==</span> <span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Get the ID of the last record in the list</span></span>
<span>  <span class="va">offset</span> <span class="op">&lt;-</span> <span class="fu">get_offset</span><span class="op">(</span><span class="va">pub_records</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Fetch the next 100 records, starting after the last ID</span></span>
<span>  <span class="va">pub_records</span> <span class="op">&lt;-</span> <span class="fu">air_select</span><span class="op">(</span>base <span class="op">=</span> <span class="va">base_id</span>, table <span class="op">=</span> <span class="st">"crucial_research"</span>, offset <span class="op">=</span>  <span class="va">offset</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Append the records to the df</span></span>
<span>  <span class="va">all_pub_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">all_pub_records</span>, <span class="va">pub_records</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>just the useful and publish-able data, clean a bit</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">evals</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">snakecase</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/snakecase/man/caseconverter.html">to_snake_case</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">evals</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">evals_pub</span> <span class="op">&lt;-</span> <span class="va">evals</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>stage_of_process <span class="op">=</span> <span class="va">stage_of_process_todo_from_crucial_research_2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>stage_of_process <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">stage_of_process</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">stage_of_process</span> <span class="op">==</span> <span class="st">"published"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">crucial_research</span>, <span class="va">paper_abbrev</span>, <span class="va">evaluator_name</span>, <span class="va">category</span>, <span class="va">source_main</span>, <span class="va">author_agreement</span>, <span class="va">overall</span>, <span class="va">lb_overall</span>, <span class="va">ub_overall</span>, <span class="va">conf_index_overall</span>, <span class="va">advancing_knowledge_and_practice</span>, <span class="va">lb_advancing_knowledge_and_practice</span>, <span class="va">ub_advancing_knowledge_and_practice</span>, <span class="va">conf_index_advancing_knowledge_and_practice</span>, <span class="va">methods_justification_reasonableness_validity_robustness</span>, <span class="va">lb_methods_justification_reasonableness_validity_robustness</span>, <span class="va">ub_methods_justification_reasonableness_validity_robustness</span>, <span class="va">conf_index_methods_justification_reasonableness_validity_robustness</span>, <span class="va">logic_communication</span>, <span class="va">lb_logic_communication</span>, <span class="va">ub_logic_communication</span>, <span class="va">conf_index_logic_communication</span>, <span class="va">engaging_with_real_world_impact_quantification_practice_realism_and_relevance</span>, <span class="va">lb_engaging_with_real_world_impact_quantification_practice_realism_and_relevance</span>, <span class="va">ub_engaging_with_real_world_impact_quantification_practice_realism_and_relevance</span>, <span class="va">conf_index_engaging_with_real_world_impact_quantification_practice_realism_and_relevance</span>, <span class="va">relevance_to_global_priorities</span>, <span class="va">lb_relevance_to_global_priorities</span>, <span class="va">ub_relevance_to_global_priorities</span>, <span class="va">conf_index_relevance_to_global_priorities</span>, <span class="va">journal_quality_predict</span>, <span class="va">lb_journal_quality_predict</span>, <span class="va">ub_journal_quality_predict</span>, <span class="va">conf_index_journal_quality_predict</span>, <span class="va">open_collaborative_replicable</span>, <span class="va">conf_index_open_collaborative_replicable</span>, <span class="va">lb_open_collaborative_replicable</span>, <span class="va">ub_open_collaborative_replicable</span>, <span class="va">merits_journal</span>, <span class="va">lb_merits_journal</span>, <span class="va">ub_merits_journal</span>, <span class="va">conf_index_merits_journal</span><span class="op">)</span></span>
<span></span>
<span><span class="va">evals_pub</span> <span class="op">%&lt;&gt;%</span></span>
<span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">category</span>, names_sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">paper_abbrev</span>, names_sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">unlist</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co">#unlist list columns </span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>paper_abbrev <span class="op">=</span> <span class="va">paper_abbrev1</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Todo -- check the unlist is not propagating the entry</span></span>
<span><span class="co">#Note: category,  topic_subfield, and source have multiple meaningful categories. These will need care  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Shorten names</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">new_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"eval_name"</span> <span class="op">=</span> <span class="st">"evaluator_name"</span>,</span>
<span>  <span class="st">"cat_1"</span> <span class="op">=</span> <span class="st">"category1"</span>,</span>
<span>  <span class="st">"cat_2"</span> <span class="op">=</span> <span class="st">"category2"</span>,</span>
<span>  <span class="st">"cat_3"</span> <span class="op">=</span> <span class="st">"category3"</span>,</span>
<span>  <span class="st">"crucial_rsx"</span> <span class="op">=</span> <span class="st">"crucial_research"</span>,</span>
<span>  <span class="st">"conf_overall"</span> <span class="op">=</span> <span class="st">"conf_index_overall"</span>,</span>
<span>  <span class="st">"adv_knowledge"</span> <span class="op">=</span> <span class="st">"advancing_knowledge_and_practice"</span>,</span>
<span>  <span class="st">"lb_adv_knowledge"</span> <span class="op">=</span> <span class="st">"lb_advancing_knowledge_and_practice"</span>,</span>
<span>  <span class="st">"ub_adv_knowledge"</span> <span class="op">=</span> <span class="st">"ub_advancing_knowledge_and_practice"</span>,</span>
<span>  <span class="st">"conf_adv_knowledge"</span> <span class="op">=</span> <span class="st">"conf_index_advancing_knowledge_and_practice"</span>,</span>
<span>  <span class="st">"methods"</span> <span class="op">=</span> <span class="st">"methods_justification_reasonableness_validity_robustness"</span>,</span>
<span>  <span class="st">"lb_methods"</span> <span class="op">=</span> <span class="st">"lb_methods_justification_reasonableness_validity_robustness"</span>,</span>
<span>  <span class="st">"ub_methods"</span> <span class="op">=</span> <span class="st">"ub_methods_justification_reasonableness_validity_robustness"</span>,</span>
<span>  <span class="st">"conf_methods"</span> <span class="op">=</span> <span class="st">"conf_index_methods_justification_reasonableness_validity_robustness"</span>,</span>
<span>  <span class="st">"logic_comms"</span> <span class="op">=</span> <span class="st">"logic_communication"</span>,</span>
<span>  <span class="st">"lb_logic_comms"</span> <span class="op">=</span> <span class="st">"lb_logic_communication"</span>,</span>
<span>  <span class="st">"ub_logic_comms"</span> <span class="op">=</span> <span class="st">"ub_logic_communication"</span>,</span>
<span>  <span class="st">"conf_logic_comms"</span> <span class="op">=</span> <span class="st">"conf_index_logic_communication"</span>,</span>
<span>  <span class="st">"real_world"</span> <span class="op">=</span> <span class="st">"engaging_with_real_world_impact_quantification_practice_realism_and_relevance"</span>,</span>
<span>  <span class="st">"lb_real_world"</span> <span class="op">=</span> <span class="st">"lb_engaging_with_real_world_impact_quantification_practice_realism_and_relevance"</span>,</span>
<span>  <span class="st">"ub_real_world"</span> <span class="op">=</span> <span class="st">"ub_engaging_with_real_world_impact_quantification_practice_realism_and_relevance"</span>,</span>
<span>  <span class="st">"conf_real_world"</span> <span class="op">=</span> <span class="st">"conf_index_engaging_with_real_world_impact_quantification_practice_realism_and_relevance"</span>,</span>
<span>  <span class="st">"gp_relevance"</span> <span class="op">=</span> <span class="st">"relevance_to_global_priorities"</span>,</span>
<span>  <span class="st">"lb_gp_relevance"</span> <span class="op">=</span> <span class="st">"lb_relevance_to_global_priorities"</span>,</span>
<span>  <span class="st">"ub_gp_relevance"</span> <span class="op">=</span> <span class="st">"ub_relevance_to_global_priorities"</span>,</span>
<span>  <span class="st">"conf_gp_relevance"</span> <span class="op">=</span> <span class="st">"conf_index_relevance_to_global_priorities"</span>,</span>
<span>  <span class="st">"journal_predict"</span> <span class="op">=</span> <span class="st">"journal_quality_predict"</span>,</span>
<span>  <span class="st">"lb_journal_predict"</span> <span class="op">=</span> <span class="st">"lb_journal_quality_predict"</span>,</span>
<span>  <span class="st">"ub_journal_predict"</span> <span class="op">=</span> <span class="st">"ub_journal_quality_predict"</span>,</span>
<span>  <span class="st">"conf_journal_predict"</span> <span class="op">=</span> <span class="st">"conf_index_journal_quality_predict"</span>,</span>
<span>  <span class="st">"open_sci"</span> <span class="op">=</span> <span class="st">"open_collaborative_replicable"</span>,</span>
<span>  <span class="st">"conf_open_sci"</span> <span class="op">=</span> <span class="st">"conf_index_open_collaborative_replicable"</span>,</span>
<span>  <span class="st">"lb_open_sci"</span> <span class="op">=</span> <span class="st">"lb_open_collaborative_replicable"</span>,</span>
<span>  <span class="st">"ub_open_sci"</span> <span class="op">=</span> <span class="st">"ub_open_collaborative_replicable"</span>,</span>
<span>  <span class="st">"conf_merits_journal"</span> <span class="op">=</span> <span class="st">"conf_index_merits_journal"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">evals_pub</span> <span class="op">&lt;-</span> <span class="va">evals_pub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">new_names</span><span class="op">)</span></span>
<span></span>
<span><span class="va">evals_pub</span><span class="op">$</span><span class="va">source_main_wrapped</span> <span class="op">&lt;-</span> <span class="fu">wrap_text</span><span class="op">(</span><span class="va">evals_pub</span><span class="op">$</span><span class="va">source_main</span>, <span class="fl">15</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-error">
<pre><code>Error in wrap_text(evals_pub$source_main, 15): could not find function "wrap_text"</code></pre>
</div>
<details><summary>Shorten names</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">evals_pub</span><span class="op">$</span><span class="va">eval_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"^\\b\\w+\\b$|\\bAnonymous\\b"</span>, <span class="va">evals_pub</span><span class="op">$</span><span class="va">eval_name</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Anonymous_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="va">evals_pub</span><span class="op">$</span><span class="va">eval_name</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="va">evals_pub</span><span class="op">$</span><span class="va">eval_name</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># make the old names into labels</span></span>
<span></span>
<span><span class="co">#  Create a list of labels</span></span>
<span><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">new_names</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span></span>
<span><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu">str_to_title</span><span class="op">(</span><span class="va">labels</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Assign labels to the dataframe</span></span>
<span><span class="co"># for(i in seq_along(labels)) {</span></span>
<span><span class="co">#    col_name &lt;- new_names[names(new_names)[i]]</span></span>
<span><span class="co">#    label &lt;- labels[i]</span></span>
<span><span class="co">#    attr(evals_pub[[col_name]], "label") &lt;- label</span></span>
<span><span class="co">#  }</span></span>
<span><span class="co"># </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>

<!-- need airtable API stuff -->
<section id="reconcile-uncertainty-ratings-and-cis" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="reconcile-uncertainty-ratings-and-cis">Reconcile uncertainty ratings and CIs</h3>
<p>Where people gave only confidence level ‘dots’, we impute CIs (confidence/credible intervals). We follow the correspondence described <a href="https://effective-giving-marketing.gitbook.io/unjournal-x-ea-and-global-priorities-research/policies-projects-evaluation-workflow/evaluation/guidelines-for-evaluators#1-5-dots-explanation-and-relation-to-cis">here</a>. (Otherwise where they gave actual CIs, we use these.)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Dots to interval choices
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote class="blockquote">
<p>5 = Extremely confident, i.e., 90% confidence interval spans +/- 4 points or less)</p>
</blockquote>
<p>For 0-100 ratings, code the LB as <span class="math inline">\(min(R - 4\times \frac{R}{100},0)\)</span> and the UB as <span class="math inline">\(max(R + 4\times \frac{R}{100},0)\)</span>, where R is the stated (middle) rating. This ‘scales’ the CI, as interpreted, to be proportional to the rating, with a maximum ‘interval’ of about 8, with the rating is about 96.</p>
<blockquote class="blockquote">
<p>4 = Very*confident: 90% confidence interval +/- 8 points or less</p>
</blockquote>
<p>For 0-100 ratings, code the LB as <span class="math inline">\(min(R - 8\times \frac{R}{100},0)\)</span> and the UB as <span class="math inline">\(max(R + 8\times \frac{R}{100},0)\)</span>, where R is the stated (middle) rating.</p>
<blockquote class="blockquote">
<p>3 = Somewhat** confident: 90% confidence interval +/- 15 points or less </p>
</blockquote>
<blockquote class="blockquote">
<p>2 = Not very** confident: 90% confidence interval, +/- 25 points or less</p>
</blockquote>
<p>Comparable scaling for the 2-3 ratings as for the 4 and 5 rating.</p>
<blockquote class="blockquote">
<p>1 = Not** confident: (90% confidence interval +/- more than 25 points)</p>
</blockquote>
<p>Code LB as <span class="math inline">\(min(R - 37.5\times \frac{R}{100},0)\)</span> and the UB as <span class="math inline">\(max(R + 37.5\times \frac{R}{100},0)\)</span>.</p>
<p>This is just a first-pass. There might be a more information-theoretic way of doing this. On the other hand, we might be switching the evaluations to use a different tool soon, perhaps getting rid of the 1-5 confidence ratings altogether.</p>
</div>
</div>
</div>
<div class="cell">
<details><summary>reconcile explicit bounds and stated confidence level</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Define the baseline widths for each confidence rating</span></span>
<span><span class="va">baseline_widths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">8</span>, <span class="fl">15</span>, <span class="fl">25</span>, <span class="fl">37.5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define a function to calculate the lower and upper bounds, where given only an index</span></span>
<span><span class="va">calc_bounds</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rating</span>, <span class="va">confidence</span>, <span class="va">lb_explicit</span>, <span class="va">ub_explicit</span>, <span class="va">scale</span><span class="op">=</span><span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Check if confidence is NA</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">confidence</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">lb_explicit</span>, <span class="va">ub_explicit</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Return explicit bounds if confidence is NA</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">baseline_width</span> <span class="op">&lt;-</span> <span class="va">baseline_widths</span><span class="op">[</span><span class="va">confidence</span><span class="op">]</span></span>
<span>    <span class="va">lb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">pmax</a></span><span class="op">(</span><span class="va">rating</span> <span class="op">-</span> <span class="va">baseline_width</span> <span class="op">*</span> <span class="va">rating</span> <span class="op">/</span> <span class="va">scale</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>    <span class="va">ub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">pmin</a></span><span class="op">(</span><span class="va">rating</span> <span class="op">+</span> <span class="va">baseline_width</span> <span class="op">*</span> <span class="va">rating</span> <span class="op">/</span> <span class="va">scale</span>, <span class="va">scale</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">lb</span>, <span class="va">ub</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Function to calculate bounds for a single category</span></span>
<span><span class="va">calc_category_bounds</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">category</span>, <span class="va">scale</span><span class="op">=</span><span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Calculate bounds</span></span>
<span>  <span class="va">bounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mapply.html">mapply</a></span><span class="op">(</span><span class="va">calc_bounds</span>, <span class="va">df</span><span class="op">[[</span><span class="va">category</span><span class="op">]</span><span class="op">]</span>, <span class="va">df</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"conf_"</span>, <span class="va">category</span><span class="op">)</span><span class="op">]</span><span class="op">]</span>, <span class="va">df</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"lb_"</span>, <span class="va">category</span><span class="op">)</span><span class="op">]</span><span class="op">]</span>, <span class="va">df</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"ub_"</span>, <span class="va">category</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Convert to data frame and ensure it has the same number of rows as the input</span></span>
<span>  <span class="va">bounds_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">bounds</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">bounds_df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span>  </span>
<span>  <span class="co"># Add bounds to original data frame</span></span>
<span>  <span class="va">df</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">category</span>, <span class="st">"_lb_imp"</span><span class="op">)</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">bounds_df</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">df</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">category</span>, <span class="st">"_ub_imp"</span><span class="op">)</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">bounds_df</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co"># Lists of categories</span></span>
<span></span>
<span><span class="va">rating_cats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"overall"</span>, <span class="st">"adv_knowledge"</span>, <span class="st">"methods"</span>, <span class="st">"logic_comms"</span>, <span class="st">"real_world"</span>, <span class="st">"gp_relevance"</span>, <span class="st">"open_sci"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#... 'predictions' are currently 1-5 (0-5?)</span></span>
<span><span class="va">pred_cats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"journal_predict"</span>, <span class="st">"merits_journal"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply the function to each category</span></span>
<span><span class="co"># DR: I don't love this looping 'edit in place' code approach, but whatever</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">cat</span> <span class="kw">in</span> <span class="va">rating_cats</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">evals_pub</span> <span class="op">&lt;-</span> <span class="fu">calc_category_bounds</span><span class="op">(</span><span class="va">evals_pub</span>, <span class="va">cat</span>, scale<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">cat</span> <span class="kw">in</span> <span class="va">pred_cats</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">evals_pub</span> <span class="op">&lt;-</span> <span class="fu">calc_category_bounds</span><span class="op">(</span><span class="va">evals_pub</span>, <span class="va">cat</span>, scale<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>save data for others’ use</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">evals_pub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"evals.Rdata"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">evals_pub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">write_csv</span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"evals.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#evals_pub %&gt;% readRDS(file = here("data", "evals.Rdata"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="basic-presentation" class="level1 page-columns page-full" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Basic presentation</h1>
<section id="what-sorts-of-papersprojects-are-we-considering-and-evaluating" class="level2 page-columns page-full" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="what-sorts-of-papersprojects-are-we-considering-and-evaluating">
<span class="header-section-number">2.1</span> What sorts of papers/projects are we considering and evaluating?</h2>
<p>In this section, we give some simple data summaries and visualizations, for a broad description of The Unjournal’s coverage.</p>
<p>In the interactive tables below we give some key attributes of the papers and the evaluators, and a preview of the evaluations.</p>
<div class="column-body-outset">
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">(</span></span>
<span>  <span class="va">all_evals_dt</span> <span class="op">&lt;-</span> <span class="va">evals_pub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">paper_abbrev</span>, <span class="va">eval_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">paper_abbrev</span>, <span class="va">crucial_rsx</span>, <span class="va">eval_name</span>, <span class="va">cat_1</span>, <span class="va">cat_2</span>, <span class="va">source_main_wrapped</span>, <span class="va">author_agreement</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"ub_|lb_|conf"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="co">#rename_all(~ gsub("_", " ", .)) %&gt;% </span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="st">"Research  _____________________"</span> <span class="op">=</span> <span class="st">"crucial_rsx"</span> </span>
<span>      <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span></span>
<span>    caption <span class="op">=</span> <span class="st">"Evaluations (confidence bounds not shown)"</span>, </span>
<span>    filter <span class="op">=</span> <span class="st">'top'</span>,</span>
<span>    rownames<span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pageLength <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-error">
<pre><code>Error in `dplyr::select()`:
! Can't subset columns that don't exist.
✖ Column `source_main_wrapped` doesn't exist.</code></pre>
</div>
</div>
<p><br></p>
<p>Next, the ‘middle ratings and predictions’.</p>
<div class="cell">
<details><summary>Data datable (all shareable relevant data)</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">(</span></span>
<span>  <span class="va">all_evals_dt</span> <span class="op">&lt;-</span> <span class="va">evals_pub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">paper_abbrev</span>, <span class="va">eval_name</span>, <span class="va">overall</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">paper_abbrev</span>, <span class="va">eval_name</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of</a></span><span class="op">(</span><span class="va">rating_cats</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span></span>
<span>    caption <span class="op">=</span> <span class="st">"Evaluations and predictions (confidence bounds not shown)"</span>, </span>
<span>    filter <span class="op">=</span> <span class="st">'top'</span>,</span>
<span>    rownames<span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pageLength <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div id="htmlwidget-440aa1239f9895d44201" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-440aa1239f9895d44201">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"40\" data-max=\"92\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"25\" data-max=\"97\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"50\" data-max=\"95\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"45\" data-max=\"85\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"50\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"50\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"45\" data-max=\"95\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","caption":"<caption>Evaluations and predictions (confidence bounds not shown)<\/caption>","data":[["AI and econ. growth","AI and econ. growth","Advance market commit. (vaccines)","Advance market commit. (vaccines)","Advance market commit. (vaccines)","Banning wildlife trade can boost demand","Banning wildlife trade can boost demand","CBT Human K, Ghana","CBT Human K, Ghana","Env. fx of prod.: ecological obs","Env. fx of prod.: ecological obs","LT CEA: Resilient foods vs. AGI safety","LT CEA: Resilient foods vs. AGI safety","LT CEA: Resilient foods vs. AGI safety","Nonprofit Govc.: Randomized healthcare DRC","Well-being: Cash vs. psychotherapy","Well-being: Cash vs. psychotherapy"],["Phil Trammel","Seth Benzell","Dan Tortorice","David Manheim","Joel Tan","Anonymous_3","Liew Jia Huan","Anonymous_11","Anonymous_16","Anonymous_12","Elias Cisneros","Alex Bates","Anca Hanea","Scott Janzwood","Wayne Aaron Sandholtz","Anonymous_13","Hannah Metzler"],[92,80,80,80,79,75,75,75,75,70,88,40,80,65,65,90,75],[97,75,90,25,90,70,80,60,65,70,90,30,80,null,70,90,70],[70,80,80,95,70,80,50,90,60,70,75,50,70,null,60,90,90],[45,70,80,75,70,70,70,70,75,75,80,60,85,null,55,80,75],[null,null,null,null,90,90,90,50,75,60,95,null,null,null,55,100,75],[92,90,95,60,90,80,65,50,75,80,95,90,85,null,80,100,90],[80,95,90,null,50,70,50,90,50,65,90,70,73,null,45,70,50]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>paper_abbrev<\/th>\n      <th>eval_name<\/th>\n      <th>overall<\/th>\n      <th>adv_knowledge<\/th>\n      <th>methods<\/th>\n      <th>logic_comms<\/th>\n      <th>real_world<\/th>\n      <th>gp_relevance<\/th>\n      <th>open_sci<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":7,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[7,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<!-- Todo -- Present these, including bounds, in a useful way -->
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">(</span></span>
<span>  <span class="va">all_evals_dt_ci</span> <span class="op">&lt;-</span> <span class="va">evals_pub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">paper_abbrev</span>, <span class="va">eval_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">paper_abbrev</span>, <span class="va">eval_name</span>, <span class="va">conf_overall</span>, <span class="va">rating_cats</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"ub_imp|lb_imp"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span></span>
<span>    caption <span class="op">=</span> <span class="st">"Evaluations and (imputed*) confidence bounds)"</span>, </span>
<span>    filter <span class="op">=</span> <span class="st">'top'</span>,</span>
<span>    rownames<span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pageLength <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Next consider…
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>Composition of research evaluated
<ul>
<li>By field (economics, psychology, etc.)</li>
<li>By subfield of economics</li>
<li>By topic/cause area (Global health, economic development, impact of technology, global catastrophic risks, etc. )</li>
<li>By source (submitted, identified with author permission, direct evaluation)</li>
</ul>
</li>
<li>Timing of intake and evaluation<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>
</li>
</ul>
</div>
</div>
</div>
<p>The funnel plot below starts with the paper we prioritized for likely Unjournal evaluation, marking these as ‘considering’.</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Add in the 3 different evaluation input sources</span></span>
<span><span class="co">#update to be automated rather than hard-coded - to look at David's work here</span></span>
<span></span>
<span><span class="va">papers_considered</span> <span class="op">&lt;-</span> <span class="va">all_pub_records</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">papers_deprio</span> <span class="op">&lt;-</span> <span class="va">all_pub_records</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">`stage of process/todo`</span> <span class="op">==</span>  <span class="st">"de-prioritized"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">papers_evaluated</span> <span class="op">&lt;-</span> <span class="va">all_pub_records</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">`stage of process/todo`</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"published"</span>,</span>
<span>                                                                              <span class="st">"contacting/awaiting_authors_response_to_evaluation"</span>,</span>
<span>                                                                               <span class="st">"awaiting_publication_ME_comments"</span>,</span>
<span>                                                                              <span class="st">"awaiting_evaluations"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">papers_complete</span> <span class="op">&lt;-</span> <span class="va">all_pub_records</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">`stage of process/todo`</span> <span class="op">==</span>  <span class="st">"published"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">papers_in_progress</span> <span class="op">&lt;-</span>  <span class="va">papers_evaluated</span><span class="op">-</span><span class="va">papers_complete</span></span>
<span></span>
<span><span class="va">papers_still_in_consideration</span> <span class="op">&lt;-</span>  <span class="va">all_pub_records</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">`stage of process/todo`</span> <span class="op">==</span>  <span class="st">"considering"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="fu">plot_ly</span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"sankey"</span>,</span>
<span>    orientation <span class="op">=</span> <span class="st">"h"</span>,</span>
<span></span>
<span>    node <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Prioritized"</span>, <span class="st">"Eval    uated"</span>, <span class="st">"Complete"</span>, <span class="st">"In progress"</span>, <span class="st">"Still in consideration"</span>, <span class="st">"De-prioritized"</span><span class="op">)</span>,</span>
<span>      color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="st">"green"</span>, <span class="st">"green"</span>, <span class="st">"orange"</span>, <span class="st">"orange"</span>, <span class="st">"red"</span><span class="op">)</span>,</span>
<span>      pad <span class="op">=</span> <span class="fl">15</span>,</span>
<span>      thickness <span class="op">=</span> <span class="fl">20</span>,</span>
<span>      line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>        color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>        width <span class="op">=</span> <span class="fl">0.5</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span></span>
<span>    link <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>      source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>      target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span>,</span>
<span>      value <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>        <span class="va">papers_evaluated</span>,</span>
<span>        <span class="va">papers_complete</span>,</span>
<span>        <span class="va">papers_in_progress</span>,</span>
<span>        <span class="va">papers_still_in_consideration</span>,</span>
<span>        <span class="va">papers_deprio</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="va">fig</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html">layout</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Unjournal paper funnel"</span>,</span>
<span>    font <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>      size <span class="op">=</span> <span class="fl">10</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fig</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div id="htmlwidget-f38362fd71640f7ca602" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f38362fd71640f7ca602">{"x":{"visdat":{"79946d40a0b":["function () ","plotlyVisDat"]},"cur_data":"79946d40a0b","attrs":{"79946d40a0b":{"orientation":"h","node":{"label":["Prioritized","Eval    uated","Complete","In progress","Still in consideration","De-prioritized"],"color":["orange","green","green","orange","orange","red"],"pad":15,"thickness":20,"line":{"color":"black","width":0.5}},"link":{"source":[0,1,1,0,0],"target":[1,2,3,4,5],"value":[10,8,2,20,1]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sankey"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Unjournal paper funnel","font":{"size":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"orientation":"h","node":{"label":["Prioritized","Eval    uated","Complete","In progress","Still in consideration","De-prioritized"],"color":["orange","green","green","orange","orange","red"],"pad":15,"thickness":20,"line":{"color":"black","width":0.5}},"link":{"source":[0,1,1,0,0],"target":[1,2,3,4,5],"value":[10,8,2,20,1]},"type":"sankey","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">summary_df</span> <span class="op">&lt;-</span> <span class="va">evals_pub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">crucial_rsx</span>, .keep_all <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cat_1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">summary_df</span><span class="op">$</span><span class="va">cat_1</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">summary_df</span><span class="op">$</span><span class="va">cat_1</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Unknown"</span></span>
<span></span>
<span><span class="va">summary_df</span> <span class="op">&lt;-</span> <span class="va">summary_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cat_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cat_1</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">cat_1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create stacked bar chart</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">summary_df</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">cat_1</span>, y <span class="op">=</span> <span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Paper category"</span>, y <span class="op">=</span> <span class="st">"Count"</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"Count of evaluated papers by primary category"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="evaluation_data_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Function to insert a newline character every 15 characters</span></span>
<span><span class="va">wrap_text</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">width</span> <span class="op">=</span> <span class="fl">15</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"(.{1,15})"</span>, <span class="st">"\\1-\n"</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co"># Bar plot</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">evals_pub</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">source_main_wrapped</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span>, stat <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Source"</span>, y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_light</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Evaluations by source of the paper"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># add title</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    panel.grid.major <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span><span class="op">)</span>, <span class="co"># changing all text size to 16</span></span>
<span>    axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-error">
<pre><code>Error in `geom_bar()`:
! Problem while computing aesthetics.
ℹ Error occurred in the 1st layer.
Caused by error in `FUN()`:
! object 'source_main_wrapped' not found</code></pre>
</div>
<div class="cell-output-display">
<p><img src="evaluation_data_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">all_pub_records</span><span class="op">$</span><span class="va">is_evaluated</span> <span class="op">=</span> <span class="va">all_pub_records</span><span class="op">$</span><span class="va">`stage of process/todo`</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"published"</span>,</span>
<span>                                                                              <span class="st">"contacting/awaiting_authors_response_to_evaluation"</span>,</span>
<span>                                                                               <span class="st">"awaiting_publication_ME_comments"</span>,</span>
<span>                                                                              <span class="st">"awaiting_evaluations"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">all_pub_records</span><span class="op">$</span><span class="va">source_main</span><span class="op">[</span><span class="va">all_pub_records</span><span class="op">$</span><span class="va">source_main</span> <span class="op">==</span> <span class="st">"NA"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Not applicable"</span>  </span>
<span><span class="va">all_pub_records</span><span class="op">$</span><span class="va">source_main</span><span class="op">[</span><span class="va">all_pub_records</span><span class="op">$</span><span class="va">source_main</span> <span class="op">==</span> <span class="st">"internal-from-syllabus-agenda-policy-database"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Internal: syllabus, agenda, etc."</span>  </span>
<span><span class="va">all_pub_records</span><span class="op">$</span><span class="va">source_main</span> <span class="op">=</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">all_pub_records</span><span class="op">$</span><span class="va">source_main</span>, <span class="st">"Unknown"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">all_pub_records</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">source_main</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">is_evaluated</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span>, stat <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Source"</span>, y <span class="op">=</span> <span class="st">"Count"</span>, fill <span class="op">=</span> <span class="st">"Selected for\nevaluation?"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="co"># flipping the coordinates to have categories on y-axis (on the left)</span></span>
<span>  <span class="fu">theme_light</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Evaluations by source of the paper"</span><span class="op">)</span> <span class="op">+</span><span class="co"># add title</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    panel.grid.major <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span><span class="op">)</span>, <span class="co"># changing all text size to 16</span></span>
<span>    axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="evaluation_data_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="the-distribution-of-ratings-and-predictions" class="level3 unnumbered page-columns page-full"><h3 class="unnumbered anchored" data-anchor-id="the-distribution-of-ratings-and-predictions">The distribution of ratings and predictions</h3>
<p>Next, we present the ratings and predictions along with ‘uncertainty measures’.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Where evaluators gave only a 1-5 confidence level<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, we use the imputations discussed and coded above.</p>
<ul>
<li>For each category and prediction (overall and by paper)</li>
</ul>
<div class="column-body-outset">
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wrap_text</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">text</span>, <span class="va">width</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strwrap.html">strwrap</a></span><span class="op">(</span><span class="va">text</span>, width <span class="op">=</span> <span class="va">width</span>, simplify <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>, <span class="va">paste</span>, collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">evals_pub</span><span class="op">$</span><span class="va">wrapped_pub_names</span> <span class="op">&lt;-</span> <span class="fu">wrap_text</span><span class="op">(</span><span class="va">evals_pub</span><span class="op">$</span><span class="va">paper_abbrev</span>, width <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># Dot plot</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">evals_pub</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">paper_abbrev</span>, y <span class="op">=</span> <span class="va">overall</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, size <span class="op">=</span> <span class="fl">4</span>, shape <span class="op">=</span> <span class="fl">1</span>, colour <span class="op">=</span> <span class="st">"lightblue"</span>, stroke <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_text_repel</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">revised_evaluator_name</span><span class="op">)</span>, </span>
<span>                  size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                  box.padding <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">0.35</span>, <span class="st">"lines"</span><span class="op">)</span>,</span>
<span>                  point.padding <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">0.3</span>, <span class="st">"lines"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="co"># flipping the coordinates to have categories on y-axis (on the left)</span></span>
<span>  <span class="fu">theme_light</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">xlab</span><span class="op">(</span><span class="st">"Paper"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># remove x-axis label</span></span>
<span>  <span class="fu">ylab</span><span class="op">(</span><span class="st">"Overall score"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># name y-axis</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Overall scores of evaluated papers"</span><span class="op">)</span> <span class="op">+</span><span class="co"># add title</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    panel.grid.major <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span>, <span class="co"># changing all text size to 16</span></span>
<span>    axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-error">
<pre><code>Error in `geom_text_repel()`:
! Problem while computing aesthetics.
ℹ Error occurred in the 2nd layer.
Caused by error in `FUN()`:
! object 'revised_evaluator_name' not found</code></pre>
</div>
<div class="cell-output-display">
<p><img src="evaluation_data_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div class="column-body-outset">
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">unit.scale</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="va">x</span><span class="op">*</span><span class="fl">100</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">evaluations_table</span> <span class="op">&lt;-</span> <span class="va">evals_pub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">paper_abbrev</span>, <span class="va">eval_name</span>, <span class="va">cat_1</span>, <span class="va">source_main</span>, <span class="va">overall</span>, <span class="va">adv_knowledge</span>, <span class="va">methods</span>, <span class="va">logic_comms</span>, <span class="va">journal_predict</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">paper_abbrev</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">=</span> <span class="fu">formattable</span><span class="op">(</span></span>
<span>  <span class="va">evaluations_table</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="co">#area(col = 5:8) ~ function(x) percent(x / 100, digits = 0),</span></span>
<span>    <span class="fu">area</span><span class="op">(</span>col <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span> <span class="op">~</span> <span class="fu">color_tile</span><span class="op">(</span><span class="st">"#FA614B66"</span>,<span class="st">"#3E7DCC"</span><span class="op">)</span>,</span>
<span>    `journal_predict` <span class="op">=</span> <span class="fu">proportion_bar</span><span class="op">(</span><span class="st">"#DeF7E9"</span>, <span class="va">unit.scale</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table table-condensed">
<thead><tr>
<th style="text-align:right;">
paper_abbrev
</th>
<th style="text-align:right;">
eval_name
</th>
<th style="text-align:right;">
cat_1
</th>
<th style="text-align:right;">
source_main
</th>
<th style="text-align:right;">
overall
</th>
<th style="text-align:right;">
adv_knowledge
</th>
<th style="text-align:right;">
methods
</th>
<th style="text-align:right;">
logic_comms
</th>
<th style="text-align:right;">
journal_predict
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
Well-being: Cash vs.&nbsp;psychotherapy
</td>
<td style="text-align:right;">
Anonymous_13
</td>
<td style="text-align:right;">
GH&amp;D
</td>
<td style="text-align:right;">
internal-NBER
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(80, 122, 191, 0.94)">90</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(80, 122, 191, 0.94)">90</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(80, 122, 191, 0.94)">90</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 80.00%">4.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Well-being: Cash vs.&nbsp;psychotherapy
</td>
<td style="text-align:right;">
Hannah Metzler
</td>
<td style="text-align:right;">
GH&amp;D
</td>
<td style="text-align:right;">
internal-NBER
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(80, 122, 191, 0.94)">90</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 60.00%">3.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Nonprofit Govc.: Randomized healthcare DRC
</td>
<td style="text-align:right;">
Wayne Aaron Sandholtz
</td>
<td style="text-align:right;">
GH&amp;D
</td>
<td style="text-align:right;">
internal-NBER
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(145, 112, 146, 0.73)">65</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(158, 110, 137, 0.69)">60</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(171, 108, 128, 0.65)">55</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 72.00%">3.6</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
LT CEA: Resilient foods vs.&nbsp;AGI safety
</td>
<td style="text-align:right;">
Scott Janzwood
</td>
<td style="text-align:right;">
long-term-relevant
</td>
<td style="text-align:right;">
submitted
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(145, 112, 146, 0.73)">65</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px">NA</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px">NA</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px">NA</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9">NA</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
LT CEA: Resilient foods vs.&nbsp;AGI safety
</td>
<td style="text-align:right;">
Anca Hanea
</td>
<td style="text-align:right;">
long-term-relevant
</td>
<td style="text-align:right;">
submitted
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(93, 120, 182, 0.9)">85</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 70.00%">3.5</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
LT CEA: Resilient foods vs.&nbsp;AGI safety
</td>
<td style="text-align:right;">
Alex Bates
</td>
<td style="text-align:right;">
long-term-relevant
</td>
<td style="text-align:right;">
submitted
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(210, 102, 101, 0.52)">40</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(236, 98, 83, 0.44)">30</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(184, 106, 119, 0.61)">50</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(158, 110, 137, 0.69)">60</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 40.00%">2.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Env. fx of prod.: ecological obs
</td>
<td style="text-align:right;">
Elias Cisneros
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
internal-NBER
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(85, 121, 187, 0.92)">88</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(80, 122, 191, 0.94)">90</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 80.00%">4.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Env. fx of prod.: ecological obs
</td>
<td style="text-align:right;">
Anonymous_12
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
internal-NBER
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 80.00%">4.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
CBT Human K, Ghana
</td>
<td style="text-align:right;">
Anonymous_11
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
internal-NBER
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(158, 110, 137, 0.69)">60</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(80, 122, 191, 0.94)">90</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 80.00%">4.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
CBT Human K, Ghana
</td>
<td style="text-align:right;">
Anonymous_16
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
internal-NBER
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(145, 112, 146, 0.73)">65</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(158, 110, 137, 0.69)">60</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9">NA</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Banning wildlife trade can boost demand
</td>
<td style="text-align:right;">
Anonymous_3
</td>
<td style="text-align:right;">
conservation
</td>
<td style="text-align:right;">
submitted
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 60.00%">3.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Banning wildlife trade can boost demand
</td>
<td style="text-align:right;">
Liew Jia Huan
</td>
<td style="text-align:right;">
conservation
</td>
<td style="text-align:right;">
submitted
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(184, 106, 119, 0.61)">50</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 50.00%">2.5</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Advance market commit. (vaccines)
</td>
<td style="text-align:right;">
David Manheim
</td>
<td style="text-align:right;">
policy
</td>
<td style="text-align:right;">
internal-from-syllabus-agenda-policy-database
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(250, 97, 75, 0.4)">25</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(67, 124, 200, 0.98)">95</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 60.00%">3.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Advance market commit. (vaccines)
</td>
<td style="text-align:right;">
Joel Tan
</td>
<td style="text-align:right;">
policy
</td>
<td style="text-align:right;">
internal-from-syllabus-agenda-policy-database
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(109, 118, 171, 0.85)">79</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(80, 122, 191, 0.94)">90</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 100.00%">5.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Advance market commit. (vaccines)
</td>
<td style="text-align:right;">
Dan Tortorice
</td>
<td style="text-align:right;">
policy
</td>
<td style="text-align:right;">
internal-from-syllabus-agenda-policy-database
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(80, 122, 191, 0.94)">90</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 80.00%">4.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
AI and econ. growth
</td>
<td style="text-align:right;">
Seth Benzell
</td>
<td style="text-align:right;">
macroeconomics
</td>
<td style="text-align:right;">
internal-from-syllabus-agenda-policy-database
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(119, 116, 164, 0.82)">75</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(106, 118, 173, 0.85)">80</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9">NA</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
AI and econ. growth
</td>
<td style="text-align:right;">
Phil Trammel
</td>
<td style="text-align:right;">
macroeconomics
</td>
<td style="text-align:right;">
internal-from-syllabus-agenda-policy-database
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(75, 123, 195, 0.96)">92</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(62, 125, 204, 1)">97</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(132, 114, 155, 0.77)">70</span>
</td>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: rgba(197, 104, 110, 0.56)">45</span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #DeF7E9; width: 70.00%">3.5</span>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Next, look for systematic variation</p>
<ul>
<li><p>By field and topic area of paper</p></li>
<li><p>By submission/selection route</p></li>
<li><p>By evaluation manager</p></li>
</ul>
<p>… perhaps building a model of this. We are looking for systematic ‘biases and trends’, loosely speaking, to help us better understand how our evaluation system is working.</p>
<p><br></p>
</section><section id="relationship-among-the-ratings-and-predictions" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="relationship-among-the-ratings-and-predictions">Relationship among the ratings (and predictions)</h3>
<ul>
<li><p>Correlation matrix</p></li>
<li><p>ANOVA</p></li>
<li><p>PCA (Principle components)</p></li>
<li><p>With other ‘control’ factors?</p></li>
<li>
<p>How do the specific measures predict the aggregate ones (overall rating, merited publication)</p>
<ul>
<li>CF ‘our suggested weighting’</li>
</ul>
</li>
</ul></section></section><section id="aggregation-of-expert-opinion-modeling" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="aggregation-of-expert-opinion-modeling">
<span class="header-section-number">2.2</span> Aggregation of expert opinion (modeling)</h2>
</section><section id="notes-on-sources-and-approaches" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="notes-on-sources-and-approaches">
<span class="header-section-number">2.3</span> Notes on sources and approaches</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hanea et al
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>(Consult, e.g., repliCATS/Hanea and others work; meta-science and meta-analysis approaches)</p>
<p><code>aggrecat</code> package</p>
<blockquote class="blockquote">
<p>Although the accuracy, calibration, and informativeness of the majority of methods are very similar, a couple of the aggregation methods consistently distinguish themselves as among the best or worst. Moreover, the majority of methods outperform the usual benchmarks provided by the simple average or the median of estimates.</p>
</blockquote>
<p><a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0256919#sec007">Hanea et al, 2021</a></p>
<p>However, these are in a different context. Most of those measures are designed to deal with probablistic forecasts for binary outcomes, where the predictor also gives a ‘lower bound’ and ‘upper bound’ for that probability. We could roughly compare that to our continuous metrics with 90% CI’s (or imputations for these).</p>
<p>Furthermore, many (all their successful measures?) use ‘performance-based weights’, accessing metrics from prior prediction performance of the same forecasters We do not have these, nor do we have a sensible proxy for this.</p>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
D Veen et al (2017)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><a href="https://www.researchgate.net/profile/Duco-Veen/publication/319662351_Using_the_Data_Agreement_Criterion_to_Rank_Experts'_Beliefs/links/5b73e2dc299bf14c6da6c663/Using-the-Data-Agreement-Criterion-to-Rank-Experts-Beliefs.pdf">link</a></p>
<p>… we show how experts can be ranked based on their knowledge and their level of (un)certainty. By letting experts specify their knowledge in the form of a probability distribution, we can assess how accurately they can predict new data, and how appropriate their level of (un)certainty is. The expert’s specified probability distribution can be seen as a prior in a Bayesian statistical setting. We evaluate these priors by extending an existing prior-data (dis)agreement measure, the Data Agreement Criterion, and compare this approach to using Bayes factors to assess prior specification. We compare experts with each other and the data to evaluate their appropriateness. Using this method, new research questions can be asked and answered, for instance: Which expert predicts the new data best? Is there agreement between my experts and the data? Which experts’ representation is more valid or useful? Can we reach convergence between expert judgement and data? We provided an empirical example ranking (regional) directors of a large financial institution based on their predictions of turnover.</p>
<p>Be sure to consult the <a href="https://www.semanticscholar.org/paper/Correction%3A-Veen%2C-D.%3B-Stoel%2C-D.%3B-Schalken%2C-N.%3B-K.%3B-Veen-Stoel/a2882e0e8606ef876133f25a901771259e7033b1">correction made here</a></p>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Also seems relevant:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>See <a href="https://docs.google.com/spreadsheets/d/14japw6eLGpGjEWy1MjHNJXU1skZY_GAIc2uC2HIUalM/edit#gid=0">Gsheet HERE</a>, generated from an Elicit.org inquiry.</p>
</div>
</div>
</div>
<p>In spite of the caveats in the fold above, we construct some measures of aggregate beliefs using the <code>aggrecat</code> package. We will make (and explain) some ad-hoc choices here. We present these:</p>
<ol type="1">
<li>For each paper</li>
<li>For categories of papers and cross-paper categories of evaluations</li>
<li>For the overall set of papers and evaluations</li>
</ol>
<p>We can also hold onto these aggregated metrics for later use in modeling.</p>
<ul>
<li><p>Simple averaging</p></li>
<li><p>Bayesian approaches</p></li>
<li><p>Best-performing approaches from elsewhere</p></li>
<li><p>Assumptions over unit-level random terms</p></li>
</ul>
<section id="explicit-modeling-of-research-quality-for-use-in-prizes-etc." class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="explicit-modeling-of-research-quality-for-use-in-prizes-etc.">Explicit modeling of ‘research quality’ (for use in prizes, etc.)</h3>
<ul>
<li><p>Use the above aggregation as the outcome of interest, or weight towards categories of greater interest?</p></li>
<li><p>Model with controls – look for greatest positive residual?</p></li>
</ul></section></section><section id="inter-rater-reliability" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="inter-rater-reliability">
<span class="header-section-number">2.4</span> Inter-rater reliability</h2>
</section><section id="decomposing-variation-dimension-reduction-simple-linear-models" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="decomposing-variation-dimension-reduction-simple-linear-models">
<span class="header-section-number">2.5</span> Decomposing variation, dimension reduction, simple linear models</h2>
</section><section id="later-possiblities" class="level2" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="later-possiblities">
<span class="header-section-number">2.6</span> Later possiblities</h2>
<ul>
<li><p>Relation to evaluation text content (NLP?)</p></li>
<li><p>Relation/prediction of later outcomes (traditional publication, citations, replication)</p></li>
</ul></section><section id="scoping-our-future-coverage" class="level2" data-number="2.7"><h2 data-number="2.7" class="anchored" data-anchor-id="scoping-our-future-coverage">
<span class="header-section-number">2.7</span> Scoping our future coverage</h2>
<p>We have funding to evaluate roughly 50-70 papers/projects per year, given our proposed incentives.</p>
<p>Consider:</p>
<ul>
<li><p>How many relevant NBER papers come out per year?</p></li>
<li><p>How much relevant work in other prestige archives?</p></li>
<li><p>What quotas do we want (by cause, etc.) and how feasible are these?</p></li>
</ul>


<!-- -->

</section></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Note this is only a first-pass; a more sophisticated approach may be warranted in future.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Consider: timing might be its own section or chapter; this is a major thing journals track, and we want to keep track of ourselves<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>We use “ub imp” (and “lb imp”) to denote the upper and lower bounds given by evaluators.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>More or less, the ones who report a level for ‘conf overall’, although some people did this for some but not others<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preface</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb21" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Evaluation data: description, exploration, checks</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE}</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load-packages</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "load packages"</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"code"</span>, <span class="st">"shared_packages_code.R"</span>))</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("rethinkpriorities/rp-r-package")</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rethinkpriorities)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("rethinkpriorities/r-noodling-package") #mainly used playing in real time</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnoodling)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(formattable, sparkline, <span class="at">install=</span><span class="cn">FALSE</span>)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(DT, santoku, lme4, huxtable, janitor, emmeans, sjPlot, sjmisc, ggeffects, ggrepel, likert, labelled, plotly, stringr, <span class="at">install=</span><span class="cn">FALSE</span>)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(ggthemes, paletteer, ggridges, <span class="at">install=</span><span class="cn">FALSE</span>)</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>select <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>select </span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">knitr.duplicate.label =</span> <span class="st">"allow"</span>)</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">mc.cores =</span> parallel<span class="sc">::</span><span class="fu">detectCores</span>())</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a><span class="co">#rstan_options(auto_write = TRUE)</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a><span class="co">#library(hunspell)</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="co">#(brms)</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("bergant/airtabler")</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(airtabler)</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github("rmcelreath/rethinking")</span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a><span class="co">#library(rethinking)</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- #| label: aggrecat</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "install aggrecat package"</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("metamelb-repliCATS/aggreCAT")</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a><span class="co">--&gt;</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: input_at</span></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "input from airtable"</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>base_id <span class="ot">&lt;-</span> <span class="st">"appbPYEw9nURln7Qg"</span></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Set your Airtable API key</span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a><span class="co">#Sys.setenv(AIRTABLE_API_KEY = "") </span></span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a><span class="co">#this should be set in my .Renviron file</span></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data from a specific view</span></span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>evals <span class="ot">&lt;-</span> <span class="fu">air_get</span>(<span class="at">base =</span> base_id, <span class="st">"output_eval"</span>) </span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a>all_pub_records <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a>pub_records <span class="ot">&lt;-</span> <span class="fu">air_select</span>(<span class="at">base =</span> base_id, <span class="at">table =</span> <span class="st">"crucial_research"</span>)</span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a><span class="co"># Append the records to the list</span></span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a>all_pub_records <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(all_pub_records, pub_records)</span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a><span class="co"># While the length of the records list is 100 (the maximum), fetch more records</span></span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(<span class="fu">nrow</span>(pub_records) <span class="sc">==</span> <span class="dv">100</span>) {</span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the ID of the last record in the list</span></span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a>  offset <span class="ot">&lt;-</span> <span class="fu">get_offset</span>(pub_records)</span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch the next 100 records, starting after the last ID</span></span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a>  pub_records <span class="ot">&lt;-</span> <span class="fu">air_select</span>(<span class="at">base =</span> base_id, <span class="at">table =</span> <span class="st">"crucial_research"</span>, <span class="at">offset =</span>  offset)</span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Append the records to the df</span></span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a>  all_pub_records <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(all_pub_records, pub_records)</span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: extract</span></span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "just the useful and publish-able data, clean a bit"</span></span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(evals) <span class="ot">&lt;-</span> snakecase<span class="sc">::</span><span class="fu">to_snake_case</span>(<span class="fu">colnames</span>(evals))</span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a>evals_pub <span class="ot">&lt;-</span> evals <span class="sc">%&gt;%</span> </span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">stage_of_process =</span> stage_of_process_todo_from_crucial_research_2) <span class="sc">%&gt;%</span> </span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stage_of_process =</span> <span class="fu">unlist</span>(stage_of_process)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(stage_of_process <span class="sc">==</span> <span class="st">"published"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(id, crucial_research, paper_abbrev, evaluator_name, category, source_main, author_agreement, overall, lb_overall, ub_overall, conf_index_overall, advancing_knowledge_and_practice, lb_advancing_knowledge_and_practice, ub_advancing_knowledge_and_practice, conf_index_advancing_knowledge_and_practice, methods_justification_reasonableness_validity_robustness, lb_methods_justification_reasonableness_validity_robustness, ub_methods_justification_reasonableness_validity_robustness, conf_index_methods_justification_reasonableness_validity_robustness, logic_communication, lb_logic_communication, ub_logic_communication, conf_index_logic_communication, engaging_with_real_world_impact_quantification_practice_realism_and_relevance, lb_engaging_with_real_world_impact_quantification_practice_realism_and_relevance, ub_engaging_with_real_world_impact_quantification_practice_realism_and_relevance, conf_index_engaging_with_real_world_impact_quantification_practice_realism_and_relevance, relevance_to_global_priorities, lb_relevance_to_global_priorities, ub_relevance_to_global_priorities, conf_index_relevance_to_global_priorities, journal_quality_predict, lb_journal_quality_predict, ub_journal_quality_predict, conf_index_journal_quality_predict, open_collaborative_replicable, conf_index_open_collaborative_replicable, lb_open_collaborative_replicable, ub_open_collaborative_replicable, merits_journal, lb_merits_journal, ub_merits_journal, conf_index_merits_journal)</span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-105"><a href="#cb21-105" aria-hidden="true" tabindex="-1"></a>evals_pub <span class="sc">%&lt;&gt;%</span></span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a> tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(category, <span class="at">names_sep =</span> <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a> tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(paper_abbrev, <span class="at">names_sep =</span> <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-108"><a href="#cb21-108" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), unlist)) <span class="sc">%&gt;%</span>  <span class="co">#unlist list columns </span></span>
<span id="cb21-109"><a href="#cb21-109" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">paper_abbrev =</span> paper_abbrev1)</span>
<span id="cb21-110"><a href="#cb21-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-111"><a href="#cb21-111" aria-hidden="true" tabindex="-1"></a><span class="co">#Todo -- check the unlist is not propagating the entry</span></span>
<span id="cb21-112"><a href="#cb21-112" aria-hidden="true" tabindex="-1"></a><span class="co">#Note: category,  topic_subfield, and source have multiple meaningful categories. These will need care  </span></span>
<span id="cb21-113"><a href="#cb21-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-114"><a href="#cb21-114" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>                   </span>
<span id="cb21-115"><a href="#cb21-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-116"><a href="#cb21-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-117"><a href="#cb21-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-120"><a href="#cb21-120" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-121"><a href="#cb21-121" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: shorten_names</span></span>
<span id="cb21-122"><a href="#cb21-122" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Shorten names "</span></span>
<span id="cb21-123"><a href="#cb21-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-124"><a href="#cb21-124" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb21-125"><a href="#cb21-125" aria-hidden="true" tabindex="-1"></a>  <span class="st">"eval_name"</span> <span class="ot">=</span> <span class="st">"evaluator_name"</span>,</span>
<span id="cb21-126"><a href="#cb21-126" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cat_1"</span> <span class="ot">=</span> <span class="st">"category1"</span>,</span>
<span id="cb21-127"><a href="#cb21-127" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cat_2"</span> <span class="ot">=</span> <span class="st">"category2"</span>,</span>
<span id="cb21-128"><a href="#cb21-128" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cat_3"</span> <span class="ot">=</span> <span class="st">"category3"</span>,</span>
<span id="cb21-129"><a href="#cb21-129" aria-hidden="true" tabindex="-1"></a>  <span class="st">"crucial_rsx"</span> <span class="ot">=</span> <span class="st">"crucial_research"</span>,</span>
<span id="cb21-130"><a href="#cb21-130" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_overall"</span> <span class="ot">=</span> <span class="st">"conf_index_overall"</span>,</span>
<span id="cb21-131"><a href="#cb21-131" aria-hidden="true" tabindex="-1"></a>  <span class="st">"adv_knowledge"</span> <span class="ot">=</span> <span class="st">"advancing_knowledge_and_practice"</span>,</span>
<span id="cb21-132"><a href="#cb21-132" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lb_adv_knowledge"</span> <span class="ot">=</span> <span class="st">"lb_advancing_knowledge_and_practice"</span>,</span>
<span id="cb21-133"><a href="#cb21-133" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ub_adv_knowledge"</span> <span class="ot">=</span> <span class="st">"ub_advancing_knowledge_and_practice"</span>,</span>
<span id="cb21-134"><a href="#cb21-134" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_adv_knowledge"</span> <span class="ot">=</span> <span class="st">"conf_index_advancing_knowledge_and_practice"</span>,</span>
<span id="cb21-135"><a href="#cb21-135" aria-hidden="true" tabindex="-1"></a>  <span class="st">"methods"</span> <span class="ot">=</span> <span class="st">"methods_justification_reasonableness_validity_robustness"</span>,</span>
<span id="cb21-136"><a href="#cb21-136" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lb_methods"</span> <span class="ot">=</span> <span class="st">"lb_methods_justification_reasonableness_validity_robustness"</span>,</span>
<span id="cb21-137"><a href="#cb21-137" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ub_methods"</span> <span class="ot">=</span> <span class="st">"ub_methods_justification_reasonableness_validity_robustness"</span>,</span>
<span id="cb21-138"><a href="#cb21-138" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_methods"</span> <span class="ot">=</span> <span class="st">"conf_index_methods_justification_reasonableness_validity_robustness"</span>,</span>
<span id="cb21-139"><a href="#cb21-139" aria-hidden="true" tabindex="-1"></a>  <span class="st">"logic_comms"</span> <span class="ot">=</span> <span class="st">"logic_communication"</span>,</span>
<span id="cb21-140"><a href="#cb21-140" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lb_logic_comms"</span> <span class="ot">=</span> <span class="st">"lb_logic_communication"</span>,</span>
<span id="cb21-141"><a href="#cb21-141" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ub_logic_comms"</span> <span class="ot">=</span> <span class="st">"ub_logic_communication"</span>,</span>
<span id="cb21-142"><a href="#cb21-142" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_logic_comms"</span> <span class="ot">=</span> <span class="st">"conf_index_logic_communication"</span>,</span>
<span id="cb21-143"><a href="#cb21-143" aria-hidden="true" tabindex="-1"></a>  <span class="st">"real_world"</span> <span class="ot">=</span> <span class="st">"engaging_with_real_world_impact_quantification_practice_realism_and_relevance"</span>,</span>
<span id="cb21-144"><a href="#cb21-144" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lb_real_world"</span> <span class="ot">=</span> <span class="st">"lb_engaging_with_real_world_impact_quantification_practice_realism_and_relevance"</span>,</span>
<span id="cb21-145"><a href="#cb21-145" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ub_real_world"</span> <span class="ot">=</span> <span class="st">"ub_engaging_with_real_world_impact_quantification_practice_realism_and_relevance"</span>,</span>
<span id="cb21-146"><a href="#cb21-146" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_real_world"</span> <span class="ot">=</span> <span class="st">"conf_index_engaging_with_real_world_impact_quantification_practice_realism_and_relevance"</span>,</span>
<span id="cb21-147"><a href="#cb21-147" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gp_relevance"</span> <span class="ot">=</span> <span class="st">"relevance_to_global_priorities"</span>,</span>
<span id="cb21-148"><a href="#cb21-148" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lb_gp_relevance"</span> <span class="ot">=</span> <span class="st">"lb_relevance_to_global_priorities"</span>,</span>
<span id="cb21-149"><a href="#cb21-149" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ub_gp_relevance"</span> <span class="ot">=</span> <span class="st">"ub_relevance_to_global_priorities"</span>,</span>
<span id="cb21-150"><a href="#cb21-150" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_gp_relevance"</span> <span class="ot">=</span> <span class="st">"conf_index_relevance_to_global_priorities"</span>,</span>
<span id="cb21-151"><a href="#cb21-151" aria-hidden="true" tabindex="-1"></a>  <span class="st">"journal_predict"</span> <span class="ot">=</span> <span class="st">"journal_quality_predict"</span>,</span>
<span id="cb21-152"><a href="#cb21-152" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lb_journal_predict"</span> <span class="ot">=</span> <span class="st">"lb_journal_quality_predict"</span>,</span>
<span id="cb21-153"><a href="#cb21-153" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ub_journal_predict"</span> <span class="ot">=</span> <span class="st">"ub_journal_quality_predict"</span>,</span>
<span id="cb21-154"><a href="#cb21-154" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_journal_predict"</span> <span class="ot">=</span> <span class="st">"conf_index_journal_quality_predict"</span>,</span>
<span id="cb21-155"><a href="#cb21-155" aria-hidden="true" tabindex="-1"></a>  <span class="st">"open_sci"</span> <span class="ot">=</span> <span class="st">"open_collaborative_replicable"</span>,</span>
<span id="cb21-156"><a href="#cb21-156" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_open_sci"</span> <span class="ot">=</span> <span class="st">"conf_index_open_collaborative_replicable"</span>,</span>
<span id="cb21-157"><a href="#cb21-157" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lb_open_sci"</span> <span class="ot">=</span> <span class="st">"lb_open_collaborative_replicable"</span>,</span>
<span id="cb21-158"><a href="#cb21-158" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ub_open_sci"</span> <span class="ot">=</span> <span class="st">"ub_open_collaborative_replicable"</span>,</span>
<span id="cb21-159"><a href="#cb21-159" aria-hidden="true" tabindex="-1"></a>  <span class="st">"conf_merits_journal"</span> <span class="ot">=</span> <span class="st">"conf_index_merits_journal"</span></span>
<span id="cb21-160"><a href="#cb21-160" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-161"><a href="#cb21-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-162"><a href="#cb21-162" aria-hidden="true" tabindex="-1"></a>evals_pub <span class="ot">&lt;-</span> evals_pub <span class="sc">%&gt;%</span></span>
<span id="cb21-163"><a href="#cb21-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="sc">!!!</span>new_names)</span>
<span id="cb21-164"><a href="#cb21-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-165"><a href="#cb21-165" aria-hidden="true" tabindex="-1"></a>evals_pub<span class="sc">$</span>source_main_wrapped <span class="ot">&lt;-</span> <span class="fu">wrap_text</span>(evals_pub<span class="sc">$</span>source_main, <span class="dv">15</span>)</span>
<span id="cb21-166"><a href="#cb21-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-167"><a href="#cb21-167" aria-hidden="true" tabindex="-1"></a>evals_pub<span class="sc">$</span>eval_name <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(</span>
<span id="cb21-168"><a href="#cb21-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">"^</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b$|</span><span class="sc">\\</span><span class="st">bAnonymous</span><span class="sc">\\</span><span class="st">b"</span>, evals_pub<span class="sc">$</span>eval_name),</span>
<span id="cb21-169"><a href="#cb21-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"Anonymous_"</span>, <span class="fu">seq_along</span>(evals_pub<span class="sc">$</span>eval_name)),</span>
<span id="cb21-170"><a href="#cb21-170" aria-hidden="true" tabindex="-1"></a>  evals_pub<span class="sc">$</span>eval_name</span>
<span id="cb21-171"><a href="#cb21-171" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-172"><a href="#cb21-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-173"><a href="#cb21-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-174"><a href="#cb21-174" aria-hidden="true" tabindex="-1"></a><span class="co"># make the old names into labels</span></span>
<span id="cb21-175"><a href="#cb21-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-176"><a href="#cb21-176" aria-hidden="true" tabindex="-1"></a><span class="co">#  Create a list of labels</span></span>
<span id="cb21-177"><a href="#cb21-177" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(new_names, <span class="st">"_"</span>, <span class="st">" "</span>)</span>
<span id="cb21-178"><a href="#cb21-178" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">str_to_title</span>(labels)</span>
<span id="cb21-179"><a href="#cb21-179" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb21-180"><a href="#cb21-180" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels to the dataframe</span></span>
<span id="cb21-181"><a href="#cb21-181" aria-hidden="true" tabindex="-1"></a><span class="co"># for(i in seq_along(labels)) {</span></span>
<span id="cb21-182"><a href="#cb21-182" aria-hidden="true" tabindex="-1"></a><span class="co">#    col_name &lt;- new_names[names(new_names)[i]]</span></span>
<span id="cb21-183"><a href="#cb21-183" aria-hidden="true" tabindex="-1"></a><span class="co">#    label &lt;- labels[i]</span></span>
<span id="cb21-184"><a href="#cb21-184" aria-hidden="true" tabindex="-1"></a><span class="co">#    attr(evals_pub[[col_name]], "label") &lt;- label</span></span>
<span id="cb21-185"><a href="#cb21-185" aria-hidden="true" tabindex="-1"></a><span class="co">#  }</span></span>
<span id="cb21-186"><a href="#cb21-186" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb21-187"><a href="#cb21-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-188"><a href="#cb21-188" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-189"><a href="#cb21-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-190"><a href="#cb21-190" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- need airtable API stuff --&gt;</span></span>
<span id="cb21-191"><a href="#cb21-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-192"><a href="#cb21-192" aria-hidden="true" tabindex="-1"></a><span class="fu">### Reconcile uncertainty ratings and CIs {-}</span></span>
<span id="cb21-193"><a href="#cb21-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-194"><a href="#cb21-194" aria-hidden="true" tabindex="-1"></a>Where people gave only confidence level 'dots', we impute CIs (confidence/credible intervals). We follow the correspondence described   <span class="co">[</span><span class="ot">here</span><span class="co">](https://effective-giving-marketing.gitbook.io/unjournal-x-ea-and-global-priorities-research/policies-projects-evaluation-workflow/evaluation/guidelines-for-evaluators#1-5-dots-explanation-and-relation-to-cis)</span>. (Otherwise where they gave actual CIs, we use these.)^<span class="co">[</span><span class="ot">Note this is only a first-pass; a more sophisticated approach may be warranted in future.</span><span class="co">]</span></span>
<span id="cb21-195"><a href="#cb21-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-196"><a href="#cb21-196" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true"}</span>
<span id="cb21-197"><a href="#cb21-197" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dots to interval choices</span></span>
<span id="cb21-198"><a href="#cb21-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-199"><a href="#cb21-199" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; 5 = Extremely confident, i.e., 90% confidence interval spans +/- 4 points or less)</span></span>
<span id="cb21-200"><a href="#cb21-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-201"><a href="#cb21-201" aria-hidden="true" tabindex="-1"></a>For 0-100 ratings, code the LB as $min(R - 4\times \frac{R}{100},0)$ and the UB as $max(R + 4\times \frac{R}{100},0)$, where R is the stated (middle) rating. This 'scales' the CI, as interpreted, to be proportional to the rating, with a  maximum 'interval' of about 8, with the rating is about 96.</span>
<span id="cb21-202"><a href="#cb21-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-203"><a href="#cb21-203" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; 4 = Very*confident: 90% confidence interval +/- 8 points or less</span></span>
<span id="cb21-204"><a href="#cb21-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-205"><a href="#cb21-205" aria-hidden="true" tabindex="-1"></a>For 0-100 ratings, code the LB as $min(R - 8\times \frac{R}{100},0)$ and the UB as $max(R + 8\times \frac{R}{100},0)$, where R is the stated (middle) rating. </span>
<span id="cb21-206"><a href="#cb21-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-207"><a href="#cb21-207" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; 3 = Somewhat** confident: 90% confidence interval +/- 15 points or less</span><span class="dv">&amp;#x20;</span></span>
<span id="cb21-208"><a href="#cb21-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-209"><a href="#cb21-209" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; 2 = Not very** confident: 90% confidence interval, +/- 25 points or less</span></span>
<span id="cb21-210"><a href="#cb21-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-211"><a href="#cb21-211" aria-hidden="true" tabindex="-1"></a>Comparable scaling for the 2-3 ratings as for the 4 and 5 rating.</span>
<span id="cb21-212"><a href="#cb21-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-213"><a href="#cb21-213" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; 1 = Not** confident: (90% confidence interval +/- more than 25 points)</span></span>
<span id="cb21-214"><a href="#cb21-214" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-215"><a href="#cb21-215" aria-hidden="true" tabindex="-1"></a>Code LB as $min(R - 37.5\times \frac{R}{100},0)$ and the UB as $max(R + 37.5\times \frac{R}{100},0)$. </span>
<span id="cb21-216"><a href="#cb21-216" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-217"><a href="#cb21-217" aria-hidden="true" tabindex="-1"></a>This is just a first-pass. There might be a more information-theoretic way of doing this. On the other hand, we might be switching the evaluations to use a different tool soon, perhaps getting rid of the 1-5 confidence ratings altogether.</span>
<span id="cb21-218"><a href="#cb21-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-219"><a href="#cb21-219" aria-hidden="true" tabindex="-1"></a>::: </span>
<span id="cb21-220"><a href="#cb21-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-221"><a href="#cb21-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-224"><a href="#cb21-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-225"><a href="#cb21-225" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: reconcile_bounds</span></span>
<span id="cb21-226"><a href="#cb21-226" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "reconcile explicit bounds and stated confidence level"</span></span>
<span id="cb21-227"><a href="#cb21-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-228"><a href="#cb21-228" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the baseline widths for each confidence rating</span></span>
<span id="cb21-229"><a href="#cb21-229" aria-hidden="true" tabindex="-1"></a>baseline_widths <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">25</span>, <span class="fl">37.5</span>)</span>
<span id="cb21-230"><a href="#cb21-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-231"><a href="#cb21-231" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to calculate the lower and upper bounds, where given only an index</span></span>
<span id="cb21-232"><a href="#cb21-232" aria-hidden="true" tabindex="-1"></a>calc_bounds <span class="ot">&lt;-</span> <span class="cf">function</span>(rating, confidence, lb_explicit, ub_explicit, <span class="at">scale=</span><span class="dv">100</span>) {</span>
<span id="cb21-233"><a href="#cb21-233" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if confidence is NA</span></span>
<span id="cb21-234"><a href="#cb21-234" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(confidence)) {</span>
<span id="cb21-235"><a href="#cb21-235" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">c</span>(lb_explicit, ub_explicit))  <span class="co"># Return explicit bounds if confidence is NA</span></span>
<span id="cb21-236"><a href="#cb21-236" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb21-237"><a href="#cb21-237" aria-hidden="true" tabindex="-1"></a>    baseline_width <span class="ot">&lt;-</span> baseline_widths[confidence]</span>
<span id="cb21-238"><a href="#cb21-238" aria-hidden="true" tabindex="-1"></a>    lb <span class="ot">&lt;-</span> <span class="fu">pmax</span>(rating <span class="sc">-</span> baseline_width <span class="sc">*</span> rating <span class="sc">/</span> scale, <span class="dv">0</span>)</span>
<span id="cb21-239"><a href="#cb21-239" aria-hidden="true" tabindex="-1"></a>    ub <span class="ot">&lt;-</span> <span class="fu">pmin</span>(rating <span class="sc">+</span> baseline_width <span class="sc">*</span> rating <span class="sc">/</span> scale, scale)</span>
<span id="cb21-240"><a href="#cb21-240" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">c</span>(lb, ub))</span>
<span id="cb21-241"><a href="#cb21-241" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-242"><a href="#cb21-242" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-243"><a href="#cb21-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-244"><a href="#cb21-244" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to calculate bounds for a single category</span></span>
<span id="cb21-245"><a href="#cb21-245" aria-hidden="true" tabindex="-1"></a>calc_category_bounds <span class="ot">&lt;-</span> <span class="cf">function</span>(df, category, <span class="at">scale=</span><span class="dv">100</span>) {</span>
<span id="cb21-246"><a href="#cb21-246" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate bounds</span></span>
<span id="cb21-247"><a href="#cb21-247" aria-hidden="true" tabindex="-1"></a>  bounds <span class="ot">&lt;-</span> <span class="fu">mapply</span>(calc_bounds, df[[category]], df[[<span class="fu">paste0</span>(<span class="st">"conf_"</span>, category)]], df[[<span class="fu">paste0</span>(<span class="st">"lb_"</span>, category)]], df[[<span class="fu">paste0</span>(<span class="st">"ub_"</span>, category)]])</span>
<span id="cb21-248"><a href="#cb21-248" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-249"><a href="#cb21-249" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert to data frame and ensure it has the same number of rows as the input</span></span>
<span id="cb21-250"><a href="#cb21-250" aria-hidden="true" tabindex="-1"></a>  bounds_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(bounds))</span>
<span id="cb21-251"><a href="#cb21-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(bounds_df) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb21-252"><a href="#cb21-252" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-253"><a href="#cb21-253" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add bounds to original data frame</span></span>
<span id="cb21-254"><a href="#cb21-254" aria-hidden="true" tabindex="-1"></a>  df[[<span class="fu">paste0</span>(category, <span class="st">"_lb_imp"</span>)]] <span class="ot">&lt;-</span> bounds_df[, <span class="dv">1</span>]</span>
<span id="cb21-255"><a href="#cb21-255" aria-hidden="true" tabindex="-1"></a>  df[[<span class="fu">paste0</span>(category, <span class="st">"_ub_imp"</span>)]] <span class="ot">&lt;-</span> bounds_df[, <span class="dv">2</span>]</span>
<span id="cb21-256"><a href="#cb21-256" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-257"><a href="#cb21-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb21-258"><a href="#cb21-258" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-259"><a href="#cb21-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-260"><a href="#cb21-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-261"><a href="#cb21-261" aria-hidden="true" tabindex="-1"></a><span class="co"># Lists of categories</span></span>
<span id="cb21-262"><a href="#cb21-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-263"><a href="#cb21-263" aria-hidden="true" tabindex="-1"></a>rating_cats <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"overall"</span>, <span class="st">"adv_knowledge"</span>, <span class="st">"methods"</span>, <span class="st">"logic_comms"</span>, <span class="st">"real_world"</span>, <span class="st">"gp_relevance"</span>, <span class="st">"open_sci"</span>)</span>
<span id="cb21-264"><a href="#cb21-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-265"><a href="#cb21-265" aria-hidden="true" tabindex="-1"></a><span class="co">#... 'predictions' are currently 1-5 (0-5?)</span></span>
<span id="cb21-266"><a href="#cb21-266" aria-hidden="true" tabindex="-1"></a>pred_cats <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"journal_predict"</span>, <span class="st">"merits_journal"</span>)</span>
<span id="cb21-267"><a href="#cb21-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-268"><a href="#cb21-268" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function to each category</span></span>
<span id="cb21-269"><a href="#cb21-269" aria-hidden="true" tabindex="-1"></a><span class="co"># DR: I don't love this looping 'edit in place' code approach, but whatever</span></span>
<span id="cb21-270"><a href="#cb21-270" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (cat <span class="cf">in</span> rating_cats) {</span>
<span id="cb21-271"><a href="#cb21-271" aria-hidden="true" tabindex="-1"></a>  evals_pub <span class="ot">&lt;-</span> <span class="fu">calc_category_bounds</span>(evals_pub, cat, <span class="at">scale=</span><span class="dv">100</span>)</span>
<span id="cb21-272"><a href="#cb21-272" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-273"><a href="#cb21-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-274"><a href="#cb21-274" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (cat <span class="cf">in</span> pred_cats) {</span>
<span id="cb21-275"><a href="#cb21-275" aria-hidden="true" tabindex="-1"></a>  evals_pub <span class="ot">&lt;-</span> <span class="fu">calc_category_bounds</span>(evals_pub, cat, <span class="at">scale=</span><span class="dv">5</span>)</span>
<span id="cb21-276"><a href="#cb21-276" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-277"><a href="#cb21-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-278"><a href="#cb21-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-279"><a href="#cb21-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-280"><a href="#cb21-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-281"><a href="#cb21-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-284"><a href="#cb21-284" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-285"><a href="#cb21-285" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: savedata</span></span>
<span id="cb21-286"><a href="#cb21-286" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "save data for others' use"</span></span>
<span id="cb21-287"><a href="#cb21-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-288"><a href="#cb21-288" aria-hidden="true" tabindex="-1"></a>evals_pub <span class="sc">%&gt;%</span> <span class="fu">saveRDS</span>(<span class="at">file =</span> <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"evals.Rdata"</span>))</span>
<span id="cb21-289"><a href="#cb21-289" aria-hidden="true" tabindex="-1"></a>evals_pub <span class="sc">%&gt;%</span> <span class="fu">write_csv</span>(<span class="at">file =</span> <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"evals.csv"</span>))</span>
<span id="cb21-290"><a href="#cb21-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-291"><a href="#cb21-291" aria-hidden="true" tabindex="-1"></a><span class="co">#evals_pub %&gt;% readRDS(file = here("data", "evals.Rdata"))</span></span>
<span id="cb21-292"><a href="#cb21-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-293"><a href="#cb21-293" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-294"><a href="#cb21-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-295"><a href="#cb21-295" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb21-296"><a href="#cb21-296" aria-hidden="true" tabindex="-1"></a><span class="fu"># Basic presentation</span></span>
<span id="cb21-297"><a href="#cb21-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-298"><a href="#cb21-298" aria-hidden="true" tabindex="-1"></a><span class="fu">## What sorts of papers/projects are we considering and evaluating? </span></span>
<span id="cb21-299"><a href="#cb21-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-300"><a href="#cb21-300" aria-hidden="true" tabindex="-1"></a>In this section, we give some simple data summaries and visualizations, for a broad description of The Unjournal's coverage. </span>
<span id="cb21-301"><a href="#cb21-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-302"><a href="#cb21-302" aria-hidden="true" tabindex="-1"></a>In the interactive tables below we give some key attributes of the papers and the evaluators, and a preview of the evaluations.</span>
<span id="cb21-303"><a href="#cb21-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-304"><a href="#cb21-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-305"><a href="#cb21-305" aria-hidden="true" tabindex="-1"></a>::: column-body-outset</span>
<span id="cb21-306"><a href="#cb21-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-307"><a href="#cb21-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-308"><a href="#cb21-308" aria-hidden="true" tabindex="-1"></a><span class="in">```{r }</span></span>
<span id="cb21-309"><a href="#cb21-309" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: datatable0</span></span>
<span id="cb21-310"><a href="#cb21-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-311"><a href="#cb21-311" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb21-312"><a href="#cb21-312" aria-hidden="true" tabindex="-1"></a>  all_evals_dt <span class="ot">&lt;-</span> evals_pub <span class="sc">%&gt;%</span></span>
<span id="cb21-313"><a href="#cb21-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(paper_abbrev, eval_name) <span class="sc">%&gt;%</span></span>
<span id="cb21-314"><a href="#cb21-314" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(paper_abbrev, crucial_rsx, eval_name, cat_1, cat_2, source_main_wrapped, author_agreement) <span class="sc">%&gt;%</span></span>
<span id="cb21-315"><a href="#cb21-315" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">matches</span>(<span class="st">"ub_|lb_|conf"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-316"><a href="#cb21-316" aria-hidden="true" tabindex="-1"></a>    <span class="co">#rename_all(~ gsub("_", " ", .)) %&gt;% </span></span>
<span id="cb21-317"><a href="#cb21-317" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Research  _____________________"</span> <span class="ot">=</span> <span class="st">"crucial_rsx"</span> </span>
<span id="cb21-318"><a href="#cb21-318" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb21-319"><a href="#cb21-319" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb21-320"><a href="#cb21-320" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Evaluations (confidence bounds not shown)"</span>, </span>
<span id="cb21-321"><a href="#cb21-321" aria-hidden="true" tabindex="-1"></a>    <span class="at">filter =</span> <span class="st">'top'</span>,</span>
<span id="cb21-322"><a href="#cb21-322" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames=</span> <span class="cn">FALSE</span>,</span>
<span id="cb21-323"><a href="#cb21-323" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">7</span>)</span>
<span id="cb21-324"><a href="#cb21-324" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-325"><a href="#cb21-325" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-326"><a href="#cb21-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-327"><a href="#cb21-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-328"><a href="#cb21-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-329"><a href="#cb21-329" aria-hidden="true" tabindex="-1"></a>\</span>
<span id="cb21-330"><a href="#cb21-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-331"><a href="#cb21-331" aria-hidden="true" tabindex="-1"></a>Next, the 'middle ratings and predictions'.</span>
<span id="cb21-332"><a href="#cb21-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-333"><a href="#cb21-333" aria-hidden="true" tabindex="-1"></a><span class="in">```{r }</span></span>
<span id="cb21-334"><a href="#cb21-334" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: datatable</span></span>
<span id="cb21-335"><a href="#cb21-335" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Data datable (all shareable relevant data)"</span></span>
<span id="cb21-336"><a href="#cb21-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-337"><a href="#cb21-337" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb21-338"><a href="#cb21-338" aria-hidden="true" tabindex="-1"></a>  all_evals_dt <span class="ot">&lt;-</span> evals_pub <span class="sc">%&gt;%</span></span>
<span id="cb21-339"><a href="#cb21-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(paper_abbrev, eval_name, overall) <span class="sc">%&gt;%</span></span>
<span id="cb21-340"><a href="#cb21-340" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(paper_abbrev, eval_name, <span class="fu">all_of</span>(rating_cats))  <span class="sc">%&gt;%</span></span>
<span id="cb21-341"><a href="#cb21-341" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb21-342"><a href="#cb21-342" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Evaluations and predictions (confidence bounds not shown)"</span>, </span>
<span id="cb21-343"><a href="#cb21-343" aria-hidden="true" tabindex="-1"></a>    <span class="at">filter =</span> <span class="st">'top'</span>,</span>
<span id="cb21-344"><a href="#cb21-344" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames=</span> <span class="cn">FALSE</span>,</span>
<span id="cb21-345"><a href="#cb21-345" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">7</span>)</span>
<span id="cb21-346"><a href="#cb21-346" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-347"><a href="#cb21-347" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-348"><a href="#cb21-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-349"><a href="#cb21-349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-350"><a href="#cb21-350" aria-hidden="true" tabindex="-1"></a>\</span>
<span id="cb21-351"><a href="#cb21-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-352"><a href="#cb21-352" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Todo -- Present these, including bounds, in a useful way --&gt;</span></span>
<span id="cb21-353"><a href="#cb21-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-354"><a href="#cb21-354" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb21-355"><a href="#cb21-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-356"><a href="#cb21-356" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb21-357"><a href="#cb21-357" aria-hidden="true" tabindex="-1"></a>  all_evals_dt_ci <span class="ot">&lt;-</span> evals_pub <span class="sc">%&gt;%</span></span>
<span id="cb21-358"><a href="#cb21-358" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(paper_abbrev, eval_name) <span class="sc">%&gt;%</span></span>
<span id="cb21-359"><a href="#cb21-359" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(paper_abbrev, eval_name, conf_overall, rating_cats, <span class="fu">matches</span>(<span class="st">"ub_imp|lb_imp"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-360"><a href="#cb21-360" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb21-361"><a href="#cb21-361" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Evaluations and (imputed*) confidence bounds)"</span>, </span>
<span id="cb21-362"><a href="#cb21-362" aria-hidden="true" tabindex="-1"></a>    <span class="at">filter =</span> <span class="st">'top'</span>,</span>
<span id="cb21-363"><a href="#cb21-363" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames=</span> <span class="cn">FALSE</span>,</span>
<span id="cb21-364"><a href="#cb21-364" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">7</span>)</span>
<span id="cb21-365"><a href="#cb21-365" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-366"><a href="#cb21-366" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-367"><a href="#cb21-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-368"><a href="#cb21-368" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-369"><a href="#cb21-369" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-370"><a href="#cb21-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-371"><a href="#cb21-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-372"><a href="#cb21-372" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true"}</span>
<span id="cb21-373"><a href="#cb21-373" aria-hidden="true" tabindex="-1"></a><span class="fu">## Next consider...</span></span>
<span id="cb21-374"><a href="#cb21-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-375"><a href="#cb21-375" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Composition of research evaluated</span>
<span id="cb21-376"><a href="#cb21-376" aria-hidden="true" tabindex="-1"></a><span class="ss">     - </span>By field (economics, psychology, etc.)</span>
<span id="cb21-377"><a href="#cb21-377" aria-hidden="true" tabindex="-1"></a><span class="ss">     - </span>By subfield of economics </span>
<span id="cb21-378"><a href="#cb21-378" aria-hidden="true" tabindex="-1"></a><span class="ss">     - </span>By topic/cause area (Global health, economic development, impact of technology, global catastrophic risks, etc.    )</span>
<span id="cb21-379"><a href="#cb21-379" aria-hidden="true" tabindex="-1"></a><span class="ss">     - </span>By source (submitted, identified with author permission, direct evaluation)</span>
<span id="cb21-380"><a href="#cb21-380" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-381"><a href="#cb21-381" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Timing of intake and evaluation^<span class="co">[</span><span class="ot">Consider: timing might be its own section or chapter; this is a major thing journals track, and we want to keep track of ourselves</span><span class="co">]</span></span>
<span id="cb21-382"><a href="#cb21-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-383"><a href="#cb21-383" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-384"><a href="#cb21-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-385"><a href="#cb21-385" aria-hidden="true" tabindex="-1"></a>The funnel plot below starts with the paper we prioritized for likely Unjournal evaluation, marking these as 'considering'.</span>
<span id="cb21-386"><a href="#cb21-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-389"><a href="#cb21-389" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-390"><a href="#cb21-390" aria-hidden="true" tabindex="-1"></a><span class="co">#Add in the 3 different evaluation input sources</span></span>
<span id="cb21-391"><a href="#cb21-391" aria-hidden="true" tabindex="-1"></a><span class="co">#update to be automated rather than hard-coded - to look at David's work here</span></span>
<span id="cb21-392"><a href="#cb21-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-393"><a href="#cb21-393" aria-hidden="true" tabindex="-1"></a>papers_considered <span class="ot">&lt;-</span> all_pub_records <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb21-394"><a href="#cb21-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-395"><a href="#cb21-395" aria-hidden="true" tabindex="-1"></a>papers_deprio <span class="ot">&lt;-</span> all_pub_records <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">stage of process/todo</span><span class="st">`</span> <span class="sc">==</span>  <span class="st">"de-prioritized"</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb21-396"><a href="#cb21-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-397"><a href="#cb21-397" aria-hidden="true" tabindex="-1"></a>papers_evaluated <span class="ot">&lt;-</span> all_pub_records <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">stage of process/todo</span><span class="st">`</span> <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">"published"</span>,</span>
<span id="cb21-398"><a href="#cb21-398" aria-hidden="true" tabindex="-1"></a>                                                                              <span class="st">"contacting/awaiting_authors_response_to_evaluation"</span>,</span>
<span id="cb21-399"><a href="#cb21-399" aria-hidden="true" tabindex="-1"></a>                                                                               <span class="st">"awaiting_publication_ME_comments"</span>,</span>
<span id="cb21-400"><a href="#cb21-400" aria-hidden="true" tabindex="-1"></a>                                                                              <span class="st">"awaiting_evaluations"</span>)) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb21-401"><a href="#cb21-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-402"><a href="#cb21-402" aria-hidden="true" tabindex="-1"></a>papers_complete <span class="ot">&lt;-</span> all_pub_records <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">stage of process/todo</span><span class="st">`</span> <span class="sc">==</span>  <span class="st">"published"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-403"><a href="#cb21-403" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>()</span>
<span id="cb21-404"><a href="#cb21-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-405"><a href="#cb21-405" aria-hidden="true" tabindex="-1"></a>papers_in_progress <span class="ot">&lt;-</span>  papers_evaluated<span class="sc">-</span>papers_complete</span>
<span id="cb21-406"><a href="#cb21-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-407"><a href="#cb21-407" aria-hidden="true" tabindex="-1"></a>papers_still_in_consideration <span class="ot">&lt;-</span>  all_pub_records <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">stage of process/todo</span><span class="st">`</span> <span class="sc">==</span>  <span class="st">"considering"</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb21-408"><a href="#cb21-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-409"><a href="#cb21-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-410"><a href="#cb21-410" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(</span>
<span id="cb21-411"><a href="#cb21-411" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"sankey"</span>,</span>
<span id="cb21-412"><a href="#cb21-412" aria-hidden="true" tabindex="-1"></a>    <span class="at">orientation =</span> <span class="st">"h"</span>,</span>
<span id="cb21-413"><a href="#cb21-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-414"><a href="#cb21-414" aria-hidden="true" tabindex="-1"></a>    <span class="at">node =</span> <span class="fu">list</span>(</span>
<span id="cb21-415"><a href="#cb21-415" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="fu">c</span>(<span class="st">"Prioritized"</span>, <span class="st">"Eval    uated"</span>, <span class="st">"Complete"</span>, <span class="st">"In progress"</span>, <span class="st">"Still in consideration"</span>, <span class="st">"De-prioritized"</span>),</span>
<span id="cb21-416"><a href="#cb21-416" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"green"</span>, <span class="st">"green"</span>, <span class="st">"orange"</span>, <span class="st">"orange"</span>, <span class="st">"red"</span>),</span>
<span id="cb21-417"><a href="#cb21-417" aria-hidden="true" tabindex="-1"></a>      <span class="at">pad =</span> <span class="dv">15</span>,</span>
<span id="cb21-418"><a href="#cb21-418" aria-hidden="true" tabindex="-1"></a>      <span class="at">thickness =</span> <span class="dv">20</span>,</span>
<span id="cb21-419"><a href="#cb21-419" aria-hidden="true" tabindex="-1"></a>      <span class="at">line =</span> <span class="fu">list</span>(</span>
<span id="cb21-420"><a href="#cb21-420" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb21-421"><a href="#cb21-421" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> <span class="fl">0.5</span></span>
<span id="cb21-422"><a href="#cb21-422" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb21-423"><a href="#cb21-423" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb21-424"><a href="#cb21-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-425"><a href="#cb21-425" aria-hidden="true" tabindex="-1"></a>    <span class="at">link =</span> <span class="fu">list</span>(</span>
<span id="cb21-426"><a href="#cb21-426" aria-hidden="true" tabindex="-1"></a>      <span class="at">source =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb21-427"><a href="#cb21-427" aria-hidden="true" tabindex="-1"></a>      <span class="at">target =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>),</span>
<span id="cb21-428"><a href="#cb21-428" aria-hidden="true" tabindex="-1"></a>      <span class="at">value =</span>  <span class="fu">c</span>(</span>
<span id="cb21-429"><a href="#cb21-429" aria-hidden="true" tabindex="-1"></a>        papers_evaluated,</span>
<span id="cb21-430"><a href="#cb21-430" aria-hidden="true" tabindex="-1"></a>        papers_complete,</span>
<span id="cb21-431"><a href="#cb21-431" aria-hidden="true" tabindex="-1"></a>        papers_in_progress,</span>
<span id="cb21-432"><a href="#cb21-432" aria-hidden="true" tabindex="-1"></a>        papers_still_in_consideration,</span>
<span id="cb21-433"><a href="#cb21-433" aria-hidden="true" tabindex="-1"></a>        papers_deprio</span>
<span id="cb21-434"><a href="#cb21-434" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb21-435"><a href="#cb21-435" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-436"><a href="#cb21-436" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">layout</span>(</span>
<span id="cb21-437"><a href="#cb21-437" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Unjournal paper funnel"</span>,</span>
<span id="cb21-438"><a href="#cb21-438" aria-hidden="true" tabindex="-1"></a>    <span class="at">font =</span> <span class="fu">list</span>(</span>
<span id="cb21-439"><a href="#cb21-439" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb21-440"><a href="#cb21-440" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-441"><a href="#cb21-441" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-442"><a href="#cb21-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-443"><a href="#cb21-443" aria-hidden="true" tabindex="-1"></a>fig </span>
<span id="cb21-444"><a href="#cb21-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-445"><a href="#cb21-445" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-446"><a href="#cb21-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-447"><a href="#cb21-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-450"><a href="#cb21-450" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-451"><a href="#cb21-451" aria-hidden="true" tabindex="-1"></a>summary_df <span class="ot">&lt;-</span> evals_pub <span class="sc">%&gt;%</span></span>
<span id="cb21-452"><a href="#cb21-452" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(crucial_rsx, <span class="at">.keep_all =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb21-453"><a href="#cb21-453" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cat_1) <span class="sc">%&gt;%</span></span>
<span id="cb21-454"><a href="#cb21-454" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) </span>
<span id="cb21-455"><a href="#cb21-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-456"><a href="#cb21-456" aria-hidden="true" tabindex="-1"></a>summary_df<span class="sc">$</span>cat_1[<span class="fu">is.na</span>(summary_df<span class="sc">$</span>cat_1)] <span class="ot">&lt;-</span> <span class="st">"Unknown"</span></span>
<span id="cb21-457"><a href="#cb21-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-458"><a href="#cb21-458" aria-hidden="true" tabindex="-1"></a>summary_df <span class="ot">&lt;-</span> summary_df <span class="sc">%&gt;%</span></span>
<span id="cb21-459"><a href="#cb21-459" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span><span class="fu">desc</span>(count)) <span class="sc">%&gt;%</span></span>
<span id="cb21-460"><a href="#cb21-460" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cat_1 =</span> <span class="fu">factor</span>(cat_1, <span class="at">levels =</span> <span class="fu">unique</span>(cat_1)))</span>
<span id="cb21-461"><a href="#cb21-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-462"><a href="#cb21-462" aria-hidden="true" tabindex="-1"></a><span class="co"># Create stacked bar chart</span></span>
<span id="cb21-463"><a href="#cb21-463" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_df, <span class="fu">aes</span>(<span class="at">x =</span> cat_1, <span class="at">y =</span> count)) <span class="sc">+</span></span>
<span id="cb21-464"><a href="#cb21-464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb21-465"><a href="#cb21-465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-466"><a href="#cb21-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Paper category"</span>, <span class="at">y =</span> <span class="st">"Count"</span>, </span>
<span id="cb21-467"><a href="#cb21-467" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Count of evaluated papers by primary category"</span>) </span>
<span id="cb21-468"><a href="#cb21-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-469"><a href="#cb21-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-470"><a href="#cb21-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-471"><a href="#cb21-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-472"><a href="#cb21-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-475"><a href="#cb21-475" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-476"><a href="#cb21-476" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to insert a newline character every 15 characters</span></span>
<span id="cb21-477"><a href="#cb21-477" aria-hidden="true" tabindex="-1"></a>wrap_text <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">width =</span> <span class="dv">15</span>) {</span>
<span id="cb21-478"><a href="#cb21-478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="st">"(.{1,15})"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1-</span><span class="sc">\n</span><span class="st">"</span>, x)</span>
<span id="cb21-479"><a href="#cb21-479" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-480"><a href="#cb21-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-481"><a href="#cb21-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-482"><a href="#cb21-482" aria-hidden="true" tabindex="-1"></a><span class="co"># Bar plot</span></span>
<span id="cb21-483"><a href="#cb21-483" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(evals_pub, <span class="fu">aes</span>(<span class="at">x =</span> source_main_wrapped)) <span class="sc">+</span> </span>
<span id="cb21-484"><a href="#cb21-484" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">stat =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb21-485"><a href="#cb21-485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Source"</span>, <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb21-486"><a href="#cb21-486" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb21-487"><a href="#cb21-487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-488"><a href="#cb21-488" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Evaluations by source of the paper"</span>) <span class="sc">+</span> <span class="co"># add title</span></span>
<span id="cb21-489"><a href="#cb21-489" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb21-490"><a href="#cb21-490" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-491"><a href="#cb21-491" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-492"><a href="#cb21-492" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>), <span class="co"># changing all text size to 16</span></span>
<span id="cb21-493"><a href="#cb21-493" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb21-494"><a href="#cb21-494" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>)</span>
<span id="cb21-495"><a href="#cb21-495" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-496"><a href="#cb21-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-497"><a href="#cb21-497" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-498"><a href="#cb21-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-501"><a href="#cb21-501" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-502"><a href="#cb21-502" aria-hidden="true" tabindex="-1"></a>all_pub_records<span class="sc">$</span>is_evaluated <span class="ot">=</span> all_pub_records<span class="sc">$</span><span class="st">`</span><span class="at">stage of process/todo</span><span class="st">`</span> <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">"published"</span>,</span>
<span id="cb21-503"><a href="#cb21-503" aria-hidden="true" tabindex="-1"></a>                                                                              <span class="st">"contacting/awaiting_authors_response_to_evaluation"</span>,</span>
<span id="cb21-504"><a href="#cb21-504" aria-hidden="true" tabindex="-1"></a>                                                                               <span class="st">"awaiting_publication_ME_comments"</span>,</span>
<span id="cb21-505"><a href="#cb21-505" aria-hidden="true" tabindex="-1"></a>                                                                              <span class="st">"awaiting_evaluations"</span>)</span>
<span id="cb21-506"><a href="#cb21-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-507"><a href="#cb21-507" aria-hidden="true" tabindex="-1"></a>all_pub_records<span class="sc">$</span>source_main[all_pub_records<span class="sc">$</span>source_main <span class="sc">==</span> <span class="st">"NA"</span>] <span class="ot">&lt;-</span> <span class="st">"Not applicable"</span>  </span>
<span id="cb21-508"><a href="#cb21-508" aria-hidden="true" tabindex="-1"></a>all_pub_records<span class="sc">$</span>source_main[all_pub_records<span class="sc">$</span>source_main <span class="sc">==</span> <span class="st">"internal-from-syllabus-agenda-policy-database"</span>] <span class="ot">&lt;-</span> <span class="st">"Internal: syllabus, agenda, etc."</span>  </span>
<span id="cb21-509"><a href="#cb21-509" aria-hidden="true" tabindex="-1"></a>all_pub_records<span class="sc">$</span>source_main <span class="ot">=</span> tidyr<span class="sc">::</span><span class="fu">replace_na</span>(all_pub_records<span class="sc">$</span>source_main, <span class="st">"Unknown"</span>)</span>
<span id="cb21-510"><a href="#cb21-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-511"><a href="#cb21-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-512"><a href="#cb21-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-513"><a href="#cb21-513" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_pub_records, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(source_main), <span class="at">fill =</span> is_evaluated)) <span class="sc">+</span> </span>
<span id="cb21-514"><a href="#cb21-514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">stat =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb21-515"><a href="#cb21-515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Source"</span>, <span class="at">y =</span> <span class="st">"Count"</span>, <span class="at">fill =</span> <span class="st">"Selected for</span><span class="sc">\n</span><span class="st">evaluation?"</span>) <span class="sc">+</span></span>
<span id="cb21-516"><a href="#cb21-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="co"># flipping the coordinates to have categories on y-axis (on the left)</span></span>
<span id="cb21-517"><a href="#cb21-517" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb21-518"><a href="#cb21-518" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-519"><a href="#cb21-519" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Evaluations by source of the paper"</span>) <span class="sc">+</span><span class="co"># add title</span></span>
<span id="cb21-520"><a href="#cb21-520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb21-521"><a href="#cb21-521" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-522"><a href="#cb21-522" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-523"><a href="#cb21-523" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>), <span class="co"># changing all text size to 16</span></span>
<span id="cb21-524"><a href="#cb21-524" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb21-525"><a href="#cb21-525" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>)</span>
<span id="cb21-526"><a href="#cb21-526" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-527"><a href="#cb21-527" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-528"><a href="#cb21-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-529"><a href="#cb21-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-530"><a href="#cb21-530" aria-hidden="true" tabindex="-1"></a><span class="fu">### The distribution of ratings and predictions {-}</span></span>
<span id="cb21-531"><a href="#cb21-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-532"><a href="#cb21-532" aria-hidden="true" tabindex="-1"></a>Next, we present the ratings and predictions along with 'uncertainty measures'.^<span class="co">[</span><span class="ot">We use "ub imp" (and "lb imp") to denote the upper and lower bounds given by evaluators.</span><span class="co">]</span> Where evaluators gave only a 1-5 confidence level^<span class="co">[</span><span class="ot">More or less, the ones who report a level for 'conf overall', although some people did this for some but not others</span><span class="co">]</span>, we use the imputations discussed and coded above. </span>
<span id="cb21-533"><a href="#cb21-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-534"><a href="#cb21-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-535"><a href="#cb21-535" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>For each category and prediction (overall and by paper)</span>
<span id="cb21-536"><a href="#cb21-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-537"><a href="#cb21-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-538"><a href="#cb21-538" aria-hidden="true" tabindex="-1"></a>::: column-body-outset</span>
<span id="cb21-539"><a href="#cb21-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-540"><a href="#cb21-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-543"><a href="#cb21-543" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-544"><a href="#cb21-544" aria-hidden="true" tabindex="-1"></a>wrap_text <span class="ot">&lt;-</span> <span class="cf">function</span>(text, width) {</span>
<span id="cb21-545"><a href="#cb21-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sapply</span>(<span class="fu">strwrap</span>(text, <span class="at">width =</span> width, <span class="at">simplify =</span> <span class="cn">FALSE</span>), paste, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-546"><a href="#cb21-546" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-547"><a href="#cb21-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-548"><a href="#cb21-548" aria-hidden="true" tabindex="-1"></a>evals_pub<span class="sc">$</span>wrapped_pub_names <span class="ot">&lt;-</span> <span class="fu">wrap_text</span>(evals_pub<span class="sc">$</span>paper_abbrev, <span class="at">width =</span> <span class="dv">15</span>)</span>
<span id="cb21-549"><a href="#cb21-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-550"><a href="#cb21-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-551"><a href="#cb21-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-552"><a href="#cb21-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-553"><a href="#cb21-553" aria-hidden="true" tabindex="-1"></a><span class="co"># Dot plot</span></span>
<span id="cb21-554"><a href="#cb21-554" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(evals_pub, <span class="fu">aes</span>(<span class="at">x =</span> paper_abbrev, <span class="at">y =</span> overall)) <span class="sc">+</span></span>
<span id="cb21-555"><a href="#cb21-555" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">colour =</span> <span class="st">"lightblue"</span>, <span class="at">stroke =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb21-556"><a href="#cb21-556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> revised_evaluator_name), </span>
<span id="cb21-557"><a href="#cb21-557" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb21-558"><a href="#cb21-558" aria-hidden="true" tabindex="-1"></a>                  <span class="at">box.padding =</span> <span class="fu">unit</span>(<span class="fl">0.35</span>, <span class="st">"lines"</span>),</span>
<span id="cb21-559"><a href="#cb21-559" aria-hidden="true" tabindex="-1"></a>                  <span class="at">point.padding =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">"lines"</span>)) <span class="sc">+</span></span>
<span id="cb21-560"><a href="#cb21-560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="co"># flipping the coordinates to have categories on y-axis (on the left)</span></span>
<span id="cb21-561"><a href="#cb21-561" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb21-562"><a href="#cb21-562" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Paper"</span>) <span class="sc">+</span> <span class="co"># remove x-axis label</span></span>
<span id="cb21-563"><a href="#cb21-563" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Overall score"</span>) <span class="sc">+</span> <span class="co"># name y-axis</span></span>
<span id="cb21-564"><a href="#cb21-564" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Overall scores of evaluated papers"</span>) <span class="sc">+</span><span class="co"># add title</span></span>
<span id="cb21-565"><a href="#cb21-565" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb21-566"><a href="#cb21-566" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-567"><a href="#cb21-567" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-568"><a href="#cb21-568" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), <span class="co"># changing all text size to 16</span></span>
<span id="cb21-569"><a href="#cb21-569" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb21-570"><a href="#cb21-570" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)</span>
<span id="cb21-571"><a href="#cb21-571" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-572"><a href="#cb21-572" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-573"><a href="#cb21-573" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-574"><a href="#cb21-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-575"><a href="#cb21-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-576"><a href="#cb21-576" aria-hidden="true" tabindex="-1"></a>::: column-body-outset</span>
<span id="cb21-577"><a href="#cb21-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-580"><a href="#cb21-580" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-581"><a href="#cb21-581" aria-hidden="true" tabindex="-1"></a>unit.scale <span class="ot">=</span> <span class="cf">function</span>(x) (x<span class="sc">*</span><span class="dv">100</span> <span class="sc">-</span> <span class="fu">min</span>(x<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">/</span> (<span class="fu">max</span>(x<span class="sc">*</span><span class="dv">100</span>) <span class="sc">-</span> <span class="fu">min</span>(x<span class="sc">*</span><span class="dv">100</span>))</span>
<span id="cb21-582"><a href="#cb21-582" aria-hidden="true" tabindex="-1"></a>evaluations_table <span class="ot">&lt;-</span> evals_pub <span class="sc">%&gt;%</span></span>
<span id="cb21-583"><a href="#cb21-583" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(paper_abbrev, eval_name, cat_1, source_main, overall, adv_knowledge, methods, logic_comms, journal_predict) <span class="sc">%&gt;%</span></span>
<span id="cb21-584"><a href="#cb21-584" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(paper_abbrev))</span>
<span id="cb21-585"><a href="#cb21-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-586"><a href="#cb21-586" aria-hidden="true" tabindex="-1"></a>out <span class="ot">=</span> <span class="fu">formattable</span>(</span>
<span id="cb21-587"><a href="#cb21-587" aria-hidden="true" tabindex="-1"></a>  evaluations_table,</span>
<span id="cb21-588"><a href="#cb21-588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb21-589"><a href="#cb21-589" aria-hidden="true" tabindex="-1"></a>    <span class="co">#area(col = 5:8) ~ function(x) percent(x / 100, digits = 0),</span></span>
<span id="cb21-590"><a href="#cb21-590" aria-hidden="true" tabindex="-1"></a>    <span class="fu">area</span>(<span class="at">col =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>) <span class="sc">~</span> <span class="fu">color_tile</span>(<span class="st">"#FA614B66"</span>,<span class="st">"#3E7DCC"</span>),</span>
<span id="cb21-591"><a href="#cb21-591" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">journal_predict</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">proportion_bar</span>(<span class="st">"#DeF7E9"</span>, unit.scale)</span>
<span id="cb21-592"><a href="#cb21-592" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-593"><a href="#cb21-593" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-594"><a href="#cb21-594" aria-hidden="true" tabindex="-1"></a>out</span>
<span id="cb21-595"><a href="#cb21-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-596"><a href="#cb21-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-597"><a href="#cb21-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-598"><a href="#cb21-598" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-599"><a href="#cb21-599" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-600"><a href="#cb21-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-601"><a href="#cb21-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-602"><a href="#cb21-602" aria-hidden="true" tabindex="-1"></a>Next, look for systematic variation </span>
<span id="cb21-603"><a href="#cb21-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-604"><a href="#cb21-604" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>By field and topic area of paper</span>
<span id="cb21-605"><a href="#cb21-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-606"><a href="#cb21-606" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>By submission/selection route</span>
<span id="cb21-607"><a href="#cb21-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-608"><a href="#cb21-608" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>By evaluation manager</span>
<span id="cb21-609"><a href="#cb21-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-610"><a href="#cb21-610" aria-hidden="true" tabindex="-1"></a>... perhaps building a model of this. We are looking for systematic 'biases and trends', loosely speaking, to help us better understand how our evaluation system is working.</span>
<span id="cb21-611"><a href="#cb21-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-612"><a href="#cb21-612" aria-hidden="true" tabindex="-1"></a>\</span>
<span id="cb21-613"><a href="#cb21-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-614"><a href="#cb21-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-615"><a href="#cb21-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-616"><a href="#cb21-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-617"><a href="#cb21-617" aria-hidden="true" tabindex="-1"></a><span class="fu">### Relationship among the ratings (and predictions) {-} </span></span>
<span id="cb21-618"><a href="#cb21-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-619"><a href="#cb21-619" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Correlation matrix</span>
<span id="cb21-620"><a href="#cb21-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-621"><a href="#cb21-621" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>ANOVA</span>
<span id="cb21-622"><a href="#cb21-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-623"><a href="#cb21-623" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>PCA (Principle components)</span>
<span id="cb21-624"><a href="#cb21-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-625"><a href="#cb21-625" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>With other 'control' factors?</span>
<span id="cb21-626"><a href="#cb21-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-627"><a href="#cb21-627" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How do the specific measures predict the aggregate ones (overall rating, merited publication)</span>
<span id="cb21-628"><a href="#cb21-628" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>CF 'our suggested weighting'</span>
<span id="cb21-629"><a href="#cb21-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-630"><a href="#cb21-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-631"><a href="#cb21-631" aria-hidden="true" tabindex="-1"></a><span class="fu">## Aggregation of expert opinion (modeling)</span></span>
<span id="cb21-632"><a href="#cb21-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-633"><a href="#cb21-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-634"><a href="#cb21-634" aria-hidden="true" tabindex="-1"></a><span class="fu">## Notes on sources and approaches</span></span>
<span id="cb21-635"><a href="#cb21-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-636"><a href="#cb21-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-637"><a href="#cb21-637" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true"}</span>
<span id="cb21-638"><a href="#cb21-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-639"><a href="#cb21-639" aria-hidden="true" tabindex="-1"></a><span class="fu">## Hanea et al {-}</span></span>
<span id="cb21-640"><a href="#cb21-640" aria-hidden="true" tabindex="-1"></a>(Consult, e.g., repliCATS/Hanea and others work; meta-science and meta-analysis approaches)</span>
<span id="cb21-641"><a href="#cb21-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-642"><a href="#cb21-642" aria-hidden="true" tabindex="-1"></a><span class="in">`aggrecat`</span> package</span>
<span id="cb21-643"><a href="#cb21-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-644"><a href="#cb21-644" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Although the accuracy, calibration, and informativeness of the majority of methods are very similar, a couple of the aggregation methods consistently distinguish themselves as among the best or worst. Moreover, the majority of methods outperform the usual benchmarks provided by the simple average or the median of estimates.</span></span>
<span id="cb21-645"><a href="#cb21-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-646"><a href="#cb21-646" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Hanea et al, 2021</span><span class="co">](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0256919#sec007)</span></span>
<span id="cb21-647"><a href="#cb21-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-648"><a href="#cb21-648" aria-hidden="true" tabindex="-1"></a> However, these are in a different context. Most of those measures are designed to deal with probablistic forecasts for binary outcomes, where the predictor also gives a 'lower bound' and 'upper bound' for that probability. We could roughly compare that to our continuous metrics with 90% CI's (or imputations for these).</span>
<span id="cb21-649"><a href="#cb21-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-650"><a href="#cb21-650" aria-hidden="true" tabindex="-1"></a>Furthermore, many (all their successful measures?) use 'performance-based weights', accessing metrics from prior prediction performance of the same forecasters We do not have these, nor do we have a sensible proxy for this. </span>
<span id="cb21-651"><a href="#cb21-651" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-652"><a href="#cb21-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-653"><a href="#cb21-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-654"><a href="#cb21-654" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true"}</span>
<span id="cb21-655"><a href="#cb21-655" aria-hidden="true" tabindex="-1"></a><span class="fu">## D Veen et al (2017)</span></span>
<span id="cb21-656"><a href="#cb21-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-657"><a href="#cb21-657" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">link</span><span class="co">](https://www.researchgate.net/profile/Duco-Veen/publication/319662351_Using_the_Data_Agreement_Criterion_to_Rank_Experts'_Beliefs/links/5b73e2dc299bf14c6da6c663/Using-the-Data-Agreement-Criterion-to-Rank-Experts-Beliefs.pdf)</span></span>
<span id="cb21-658"><a href="#cb21-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-659"><a href="#cb21-659" aria-hidden="true" tabindex="-1"></a>... we show how experts can be ranked based on their knowledge and their level of (un)certainty. By letting experts specify their knowledge in the form of a probability distribution, we can assess how accurately they can predict new data, and how appropriate their level of (un)certainty is. The expert’s specified probability distribution can be seen as a prior in a Bayesian statistical setting. We evaluate these priors by extending an existing prior-data (dis)agreement measure, the Data Agreement Criterion, and compare this approach to using Bayes factors to assess prior specification. We compare experts with each other and the data to evaluate their appropriateness. Using this method, new research questions can be asked and answered, for instance: Which expert predicts the new data best? Is there agreement between my experts and the data? Which experts’ representation is more valid or useful? Can we reach convergence between expert judgement and data? We provided an empirical example ranking (regional) directors of a large financial institution based on their predictions of turnover. </span>
<span id="cb21-660"><a href="#cb21-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-661"><a href="#cb21-661" aria-hidden="true" tabindex="-1"></a>Be sure to consult the <span class="co">[</span><span class="ot">correction made here</span><span class="co">](https://www.semanticscholar.org/paper/Correction%3A-Veen%2C-D.%3B-Stoel%2C-D.%3B-Schalken%2C-N.%3B-K.%3B-Veen-Stoel/a2882e0e8606ef876133f25a901771259e7033b1)</span></span>
<span id="cb21-662"><a href="#cb21-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-663"><a href="#cb21-663" aria-hidden="true" tabindex="-1"></a>:::   </span>
<span id="cb21-664"><a href="#cb21-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-665"><a href="#cb21-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-666"><a href="#cb21-666" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true"}</span>
<span id="cb21-667"><a href="#cb21-667" aria-hidden="true" tabindex="-1"></a><span class="fu">## Also seems relevant:</span></span>
<span id="cb21-668"><a href="#cb21-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-669"><a href="#cb21-669" aria-hidden="true" tabindex="-1"></a>See <span class="co">[</span><span class="ot">Gsheet HERE</span><span class="co">](https://docs.google.com/spreadsheets/d/14japw6eLGpGjEWy1MjHNJXU1skZY_GAIc2uC2HIUalM/edit#gid=0)</span>, generated from an Elicit.org inquiry.</span>
<span id="cb21-670"><a href="#cb21-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-671"><a href="#cb21-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-672"><a href="#cb21-672" aria-hidden="true" tabindex="-1"></a>::: </span>
<span id="cb21-673"><a href="#cb21-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-674"><a href="#cb21-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-675"><a href="#cb21-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-676"><a href="#cb21-676" aria-hidden="true" tabindex="-1"></a>In spite of the caveats in the fold above, we construct some  measures of aggregate beliefs  using the <span class="in">`aggrecat`</span> package. We will make (and explain) some ad-hoc choices here. We present these:</span>
<span id="cb21-677"><a href="#cb21-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-678"><a href="#cb21-678" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>For each paper</span>
<span id="cb21-679"><a href="#cb21-679" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>For categories of papers and cross-paper categories of evaluations</span>
<span id="cb21-680"><a href="#cb21-680" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>For the overall set of papers and evaluations</span>
<span id="cb21-681"><a href="#cb21-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-682"><a href="#cb21-682" aria-hidden="true" tabindex="-1"></a>We can also hold onto these aggregated metrics for later use in modeling.</span>
<span id="cb21-683"><a href="#cb21-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-684"><a href="#cb21-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-685"><a href="#cb21-685" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Simple averaging</span>
<span id="cb21-686"><a href="#cb21-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-687"><a href="#cb21-687" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bayesian approaches </span>
<span id="cb21-688"><a href="#cb21-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-689"><a href="#cb21-689" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Best-performing approaches from elsewhere   </span>
<span id="cb21-690"><a href="#cb21-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-691"><a href="#cb21-691" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Assumptions over unit-level random terms </span>
<span id="cb21-692"><a href="#cb21-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-693"><a href="#cb21-693" aria-hidden="true" tabindex="-1"></a><span class="fu">### Explicit modeling of 'research quality' (for use in prizes, etc.) {-}</span></span>
<span id="cb21-694"><a href="#cb21-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-695"><a href="#cb21-695" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use the above aggregation as the outcome of interest, or weight towards categories of greater interest?</span>
<span id="cb21-696"><a href="#cb21-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-697"><a href="#cb21-697" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Model with controls -- look for greatest positive residual?   </span>
<span id="cb21-698"><a href="#cb21-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-699"><a href="#cb21-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-700"><a href="#cb21-700" aria-hidden="true" tabindex="-1"></a><span class="fu">## Inter-rater reliability</span></span>
<span id="cb21-701"><a href="#cb21-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-702"><a href="#cb21-702" aria-hidden="true" tabindex="-1"></a><span class="fu">## Decomposing variation, dimension reduction, simple linear models</span></span>
<span id="cb21-703"><a href="#cb21-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-704"><a href="#cb21-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-705"><a href="#cb21-705" aria-hidden="true" tabindex="-1"></a><span class="fu">## Later possiblities</span></span>
<span id="cb21-706"><a href="#cb21-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-707"><a href="#cb21-707" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Relation to evaluation text content (NLP?)</span>
<span id="cb21-708"><a href="#cb21-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-709"><a href="#cb21-709" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Relation/prediction of later outcomes (traditional publication, citations, replication)</span>
<span id="cb21-710"><a href="#cb21-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-711"><a href="#cb21-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-712"><a href="#cb21-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-713"><a href="#cb21-713" aria-hidden="true" tabindex="-1"></a><span class="fu">## Scoping our future coverage</span></span>
<span id="cb21-714"><a href="#cb21-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-715"><a href="#cb21-715" aria-hidden="true" tabindex="-1"></a>We have funding to evaluate roughly 50-70 papers/projects per year, given our proposed incentives.</span>
<span id="cb21-716"><a href="#cb21-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-717"><a href="#cb21-717" aria-hidden="true" tabindex="-1"></a>Consider:</span>
<span id="cb21-718"><a href="#cb21-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-719"><a href="#cb21-719" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How many relevant NBER papers come out per year?</span>
<span id="cb21-720"><a href="#cb21-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-721"><a href="#cb21-721" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How much relevant work in other prestige archives?</span>
<span id="cb21-722"><a href="#cb21-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-723"><a href="#cb21-723" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>What quotas do we want (by cause, etc.) and how feasible are these?</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>